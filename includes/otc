<h1 id='p2p'>P2P</h1><h2 id='p2p-flow'>P2P flow</h2>
<p>Чтобы воспользоваться API P2P-секции биржи, необходимо следующее:</p>

<ol>
<li><p>Подключить 2-х факторную аутентификацию на сайте или в приложении</p></li>
<li><p>Завести P2P-никнейм на сайте или в приложении</p></li>
<li><p>Просматривать чужие P2P-объявления, отправлять по ним сделки</p></li>
<li><p>Создавать свои объявления, получать по ним сделки</p></li>
</ol>

<p>Пункты 3 и 4 описаны ниже.</p>
<h3 id='p2p-2'>Подраздел P2P-профили</h3>
<p>Позволяет просматривать профили других пользователей, их репутацию и статистику по ним.</p>
<h3 id='d66d239c5c'>Подраздел Чаты</h3>
<p>Чат открывается автоматически, когда создается сделка. Большую часть времени в чат пишет бот - об открытии/закрытии сделок. Еще туда пишет контрагент - с обсуждением условий сделки. API позволяет читать и писать в чаты.</p>
<h3 id='3f92fe50eb'>Подраздел Все объявления</h3>
<p>API позволяет читать объявления других людей, чтобы открывать сделки по понравившимся.</p>
<h3 id='p2p-3'>Подраздел P2P-сделки</h3>
<p>Сделка создается, например, когда вы, прочитав чужое объявление, решили на него откликнуться. Для создания сделки достаточно желаемой суммы (в пределах объявления) и ID понравившегося объявления. Свои сделки можно просматривать с фильтрацией, завершать, отменять, дополнять реквизитами, ставить оценку, жаловаться. Еще на сделку можно соглашаться, если она пришла по вашему объявлению.</p>
<h3 id='83c2b835ca'>Подраздел Свои объявления</h3>
<p>Свои объявления создаются здесь. Затем их можно просматривать с фильтрацией, изменять, включать, выключать, удалять, менять вид доступа и требования к контрагенту.</p>
<h2 id='p2p-4'>P2P-профили</h2><h3 id='250e8cd75f'>Просмотр профиля пользователя</h3>
<blockquote>
<p>Получить P2P-профиль по никнейму:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://garantex.io/api/v2/otc/profiles?nickname={nickname}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"registered_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-25"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"first_deal_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_deals"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_partners_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tg_username"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt; 100K"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_volume_30d"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt; 100K"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ads_sell"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"ads_buy"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает публичный P2P-профиль пользователя по его P2P-никнейму.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/profiles</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>nickname</strong></td>
<td>да</td>
<td>P2P-никнейм, по которому нужно получить публичный профиль</td>
</tr>
</tbody></table>
<h2 id='3ba5efad4c'>Чаты</h2><h3 id='46568beeb0'>Получить список всех чатов</h3>
<blockquote>
<p>Получить список чатов авторизованного пользователя:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span>  <span class="s1">'https://garantex.io/api/v2/otc/chats?limit={limit}&amp;offset={offset}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19446</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1018</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unread_message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"counterparty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_chat_message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277969</span><span class="p">,</span><span class="w">
      </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19446</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3382</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"file_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://stage.garantex.biz/uploads/chat_message/file/277969/photo_2021-12-20_23-27-57.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:52:48+03:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-29T17:01:39+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:52:48+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unread_message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"counterparty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_chat_message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277967</span><span class="p">,</span><span class="w">
      </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:52:04+03:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-10-05T23:57:39+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:52:04+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения списка чатов для залогиненного юзера.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/chats</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество чатов, по умолчанию - 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>Сколько первых чатов пропустить, по умолчанию - 0</td>
</tr>
</tbody></table>

<div></div>
<h3 id='6a16784330'>Получить сообщения чата</h3>
<blockquote>
<p>Получить сообщения выбранного чата:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://garantex.io/api/v2/otc/chats/{chat_id}/messages?limit={limit}&amp;offset={offset}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277966</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3378</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Сделка #41520 отменена"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41520</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:33:07+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277965</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3378</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Продавец открыл сделку #41520 на сумму 100.00 RUB, к оплате / получению - 105.00 RUB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41520</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"seller_pending"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:32:34+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения списка сообщений по chat_id чата</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/chats/{chat_id}/messages</code></p>
<h3 id='6744ad4c7a-3'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>chat_id</strong></td>
<td>да</td>
<td>id выбранного чата</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество сообщений, по умолчанию - 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>Сколько первых сообщений пропустить, по умолчанию - 0</td>
</tr>
</tbody></table>

<div></div>
<h3 id='f6c74adfe0'>Послать сообщение</h3>
<blockquote>
<p>Послать сообщение в чат:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-F</span> <span class="nv">chat_id</span><span class="o">={</span>chat_id<span class="o">}</span> <span class="nt">-F</span>  <span class="nt">-F</span>  <span class="nt">-F</span> <span class="nv">message</span><span class="o">={</span>message<span class="o">}</span>  <span class="s1">'https://stage.garantex.biz/api/v2/otc/chats/message'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277977</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-23T19:47:42+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Послать сообщение в чат, выбранный по одному из id. В параметрах должен быть указан хотя бы один из id - чата (chat_id), объявления (ad_id) или сделки (deal_id), к которым относится чат. </p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-4'>HTTP Request</h4>
<p><code>POST https://stage.garantex.biz/api/v2/otc/chats/message</code></p>
<h3 id='6744ad4c7a-4'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>chat_id</strong></td>
<td>1/3</td>
<td>id чата, куда нужно отправить сообщение</td>
</tr>
<tr>
<td><strong>ad_id</strong></td>
<td>1/3</td>
<td>id объявления, в чат которого надо отправить сообщение</td>
</tr>
<tr>
<td><strong>deal_id</strong></td>
<td>1/3</td>
<td>id сделки, в чат которой надо отправить сообщение</td>
</tr>
<tr>
<td><strong>message</strong></td>
<td>да</td>
<td>Сколько первых сообщений пропустить, по умолчанию - 0</td>
</tr>
</tbody></table>

<div></div>
<h3 id='8188bc3dd3'>Пометить прочитанным</h3>
<blockquote>
<p>Пометить прочитанными сообщения чата:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/chats/{chat_id}/mark_read'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unread_message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"counterparty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_chat_message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277977</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-23T19:47:42+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-10-05T23:57:39+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-23T19:47:42+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Пометить прочитанными сообщения чата, выбранного по chat_id. </p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-5'>HTTP Request</h4>
<p><code>POST https://stage.garantex.biz/api/v2/otc/chats/{chat_id}/mark_read</code></p>
<h3 id='6744ad4c7a-5'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>chat_id</strong></td>
<td>да</td>
<td>id чата</td>
</tr>
</tbody></table>
<h2 id='e633323c70'>Все объявления</h2><h3 id='166b811675'>Список всех объявлений</h3>
<blockquote>
<p>Получить список всех объявлений:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://stage.garantex.biz/api/v2/otc/ads?direction={direction}&amp;only_available={only_available}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3388</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111111.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fffff"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fffff"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3377</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3000000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ууууу"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ууууу"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.03"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список всех объявлений с возможностью фильтрации</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-6'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/ads</code></p>
<h3 id='6744ad4c7a-6'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>direction</strong></td>
<td>да</td>
<td>Направление: <strong>sell</strong> or <strong>buy</strong></td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>нет</td>
<td>Фильтрация по сумме желаемой сделки</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>нет</td>
<td>Код фиатной валюты. Например, <strong>rub</strong>, <strong>uah</strong>, <strong>usd</strong></td>
</tr>
<tr>
<td><strong>nickname</strong></td>
<td>нет</td>
<td>Nickname второго участника сделки</td>
</tr>
<tr>
<td><strong>only_available</strong></td>
<td>нет</td>
<td>Показать только доступные сделки. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>true</strong></td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td>нет</td>
<td>Поиск по способу оплаты, включение подстроки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='b948b9bb36'>Детали объявления</h3>
<blockquote>
<p>Получить детали по id объявления:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://stage.garantex.biz/api/v2/otc/ads/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3377</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
  </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3000000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ууууу"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ууууу"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.03"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает детали объявления по указанному id объявления</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-7'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/ads/{id}</code></p>
<h3 id='6744ad4c7a-7'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>
<h2 id='p2p-c'>P2P-cделки</h2><h3 id='a66b19b34f'>Список своих сделок</h3>
<blockquote>
<p>Получить список своих сделок:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41520</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"105.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.05"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:32:34+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41519</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11.55"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.05"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"waiting"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:25:27+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список своих сделок с возможностью фильтрации</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-8'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/deals</code></p>
<h3 id='6744ad4c7a-8'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>нет</td>
<td>Код фиатной валюты. Например, <strong>rub</strong>, <strong>uah</strong>, <strong>usd</strong></td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>нет</td>
<td>Фильтрация по статусу сделки. <strong>pending</strong>, <strong>waiting</strong>, <strong>paid</strong>, <strong>arbitration</strong>, <strong>canceled</strong>, <strong>completed</strong>. Если статус не задан, выводятся все активные сделки</td>
</tr>
<tr>
<td><strong>counterparty</strong></td>
<td>нет</td>
<td>Nickname второго участника сделки</td>
</tr>
<tr>
<td><strong>direction</strong></td>
<td>нет</td>
<td>Направление сделки - <strong>sell</strong>, <strong>buy</strong>. По умолчанию выводятся все.</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество сделок, по умолчанию - 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>Через сколько первых сделок начать выводить остальные сделки</td>
</tr>
<tr>
<td><strong>start_time</strong></td>
<td>нет</td>
<td>Время создания сделок, нижняя граница. Без ограничений (date-time)</td>
</tr>
<tr>
<td><strong>end_time</strong></td>
<td>нет</td>
<td>Время создания сделок, верхняя граница. Ограничение - текущий момент (date-time)</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td>нет</td>
<td>Сортировка по id, <strong>asc</strong> или <strong>desc</strong>, по умолчанию <strong>desc</strong></td>
</tr>
</tbody></table>

<div></div>
<h3 id='726d9dd6e9'>Детали сделки</h3>
<blockquote>
<p>Получить детали по id сделки:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41514</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3379</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"900.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:06:08+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает детали сделки по указанному id сделки</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-9'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/deals/{id}</code></p>
<h3 id='6744ad4c7a-9'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='b5cdc63989'>Создание сделки</h3>
<blockquote>
<p>Создать новую P2P-сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'ad_id={ad_id}&amp;amount={amount}&amp;ad_version={ad_version}&amp;payment_info={payment_info}'</span>  <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41530</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"439.56"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:24:25+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос создает сделку и возвращает детали созданной сделки</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-10'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/otc/deals</code></p>
<h3 id='6744ad4c7a-10'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ad_id</strong></td>
<td>да</td>
<td>id объявления, по которому создается сделка</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>да</td>
<td>Сумма сделки в валюте объявления</td>
</tr>
<tr>
<td><strong>ad_version</strong></td>
<td>нет</td>
<td>id версии объявления, чтобы убедиться, что объявление не было слишком сильно изменено</td>
</tr>
<tr>
<td><strong>payment_info</strong></td>
<td>нет</td>
<td>Платежные реквизиты, применимо только к объявлениям о покупке</td>
</tr>
</tbody></table>

<div></div>
<h3 id='7467e0efe3'>Изменить рейтинг сделки</h3>
<blockquote>
<p>Изменить рейтинг сделки:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'rating={rating}'</span>  <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/rate'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41514</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3379</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"900.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:06:08+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Изменить рейтинг сделки с заданным id. Возвращаются детали сделки с измененным рейтингом</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-11'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/rate</code></p>
<h3 id='6744ad4c7a-11'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки, которой изменяется рейтинг</td>
</tr>
<tr>
<td><strong>rating</strong></td>
<td>да</td>
<td>выставляемая оценка</td>
</tr>
</tbody></table>

<div></div>
<h3 id='1d5a1fd11f'>Указание/изменение платежных реквизитов</h3>
<blockquote>
<p>Указать/изменить реквизиты:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'payment_details={payment_details}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/payment_details'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41524</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3217</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"202.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"waiting"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ffff"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-24T18:47:50+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Установить новые платежные реквизиты. Подходит только для случаев, когда вы - продавец, а сделка - в статусе <strong>waiting</strong> или <strong>pending</strong>. Запрос возвращает детали сделки с измененными реквизитами.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-12'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/payment_details</code></p>
<h3 id='6744ad4c7a-12'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки, которой изменяются платежные реквизиты</td>
</tr>
<tr>
<td><strong>payment_details</strong></td>
<td>да</td>
<td>текст платежных реквизитов</td>
</tr>
</tbody></table>

<div></div>
<h3 id='bea100a4c5'>Послать сделку на арбитраж</h3>
<blockquote>
<p>Послать сделку на арбитраж:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/arbitration'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41525</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"333.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"329.67"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arbitration"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T10:28:08+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Отправить сделку на арбитраж. Запрос возвращает детали сделки с измененным статусом.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-13'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/arbitration</code></p>
<h3 id='6744ad4c7a-13'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='d59d007de7'>Завершить сделку</h3>
<blockquote>
<p>Завершить сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/complete'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41515</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3379</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"499.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.56"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T14:45:43+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:07:16+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Завершить сделку. Запрос возвращает детали сделки с измененным статусом. Нельзя завершить сделку в статусе <strong>waiting</strong> или на арбитраже.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-14'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/complete</code></p>
<h3 id='6744ad4c7a-14'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='4c5e5fa77b'>Отменить сделку</h3>
<blockquote>
<p>Отменить сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/cancel'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41526</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"121.77"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T14:52:56+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Отменить сделку. Запрос возвращает детали сделки с измененным статусом.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-15'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/cancel</code></p>
<h3 id='6744ad4c7a-15'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='6440106972'>Оплатить сделку</h3>
<blockquote>
<p>Пометить оплаченной сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/set_paid'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41527</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"439.56"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T18:16:18+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Отметить сделку оплаченной. Запрос возвращает детали сделки с измененным статусом.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-16'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/set_paid</code></p>
<h3 id='6744ad4c7a-16'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='99496e972d'>Принять сделку</h3>
<blockquote>
<p>Принять сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/accept'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41529</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3378</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ggggggf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ggggggf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.45"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"130.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.45"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.09"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hgvhv"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T19:59:24+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Отметить сделку принятой. Запрос возвращает детали сделки с измененным статусом.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-17'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/accept</code></p>
<h3 id='6744ad4c7a-17'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>
<h2 id='274d7bcb30'>Свои объявления</h2><h3 id='24399066ee'>Список своих объявлений</h3>
<blockquote>
<p>Получить список своих объявлений</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s2">"https://garantex.io/api/v2/otc/my/ads"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3380</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rrrrrrrrrrrrr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rrrrrrrrrrrrrr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-20T00:19:55+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:39:24+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3379</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7200369.35"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7200369.35"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:22:55+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:37:31+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список всех объявлений авторизованного пользователя, с возможностью фильтрации</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-18'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/my/ads</code></p>
<h3 id='6744ad4c7a-18'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>direction</strong></td>
<td>нет</td>
<td>Направление: <strong>sell</strong> or <strong>buy</strong>. По умолчанию: все направления</td>
</tr>
<tr>
<td><strong>active</strong></td>
<td>нет</td>
<td>Активные объявления или неактивные, <strong>true</strong> или <strong>false</strong>. По умолчанию: все объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='b948b9bb36-2'>Детали объявления</h3>
<blockquote>
<p>Получить детали по id объявления:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3271</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7200369.35"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7200369.35"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"llllllllll"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"llllllllll"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:39:44+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-20T18:06:42+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает детали объявления по указанному id объявления</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-19'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/my/ads/{id}</code></p>
<h3 id='6744ad4c7a-19'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='30c79bc190'>Удалить объявление</h3>
<blockquote>
<p>Удалить объявление по id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">no</span><span class="w"> </span><span class="err">content</span><span class="w">
</span></code></pre></div>
<p>Удаление объявления</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-20'>HTTP Request</h4>
<p><code>DELETE https://garantex.io/api/v2/otc/my/ads/{id}</code></p>
<h3 id='6744ad4c7a-20'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='a39d7de6a8'>Создать объявление</h3>
<blockquote>
<p>Создать объявление:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'currency={currency}&amp;min={min}&amp;max={max}&amp;price={price}&amp;direction={direction}&amp;description={description}&amp;payment_method={payment_method}&amp;active={active}&amp;private={private}&amp;auto_increase={auto_increase}&amp;only_verified={only_verified}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3389</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yadayada"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:35:03+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:35:03+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает созданное объявление.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-21'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/otc/my/ads</code></p>
<h3 id='6744ad4c7a-21'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>да</td>
<td>Код фиатной валюты. Например, <strong>rub</strong>, <strong>uah</strong>, <strong>usd</strong></td>
</tr>
<tr>
<td><strong>min</strong></td>
<td>да</td>
<td>Минимальная сумма</td>
</tr>
<tr>
<td><strong>max</strong></td>
<td>да</td>
<td>Максимальная сумма</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td>да</td>
<td>Цена</td>
</tr>
<tr>
<td><strong>direction</strong></td>
<td>да</td>
<td>Направление: <strong>sell</strong> или <strong>buy</strong></td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>да</td>
<td>Описание</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td>да</td>
<td>Способ оплаты</td>
</tr>
<tr>
<td><strong>active</strong></td>
<td>нет</td>
<td>Активное ли объявление, <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>private</strong></td>
<td>нет</td>
<td>Приватное ли объявление, <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>auto_increase</strong></td>
<td>нет</td>
<td>Увеличивать ли максимум объявления до баланса авторизованного пользователя автоматически. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>only_verified</strong></td>
<td>нет</td>
<td>Объявление доступно только верифицированным пользователям. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>rating</strong></td>
<td>нет</td>
<td>Минимальный рейтинг контрагента. <strong>NULL</strong>, <strong>100</strong>, <strong>500</strong> и <strong>1000</strong>. По умолчанию - без ограничений</td>
</tr>
</tbody></table>

<div></div>
<h3 id='9348c6f5ea'>Редактировать объявление</h3>
<blockquote>
<p>Редактировать объявление:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'min={min}&amp;max={max}&amp;price={price}&amp;description={description}&amp;payment_method={payment_method}&amp;active={active}&amp;private={private}&amp;auto_increase={auto_increase}&amp;only_verified={only_verified}&amp;rating={rating}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3215</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3999.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"888888.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"888888.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some more text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T16:03:21+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-09T23:05:43+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает отредактированное объявление.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-22'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/my/ads/{id}</code></p>
<h3 id='6744ad4c7a-22'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
<tr>
<td><strong>min</strong></td>
<td>нет</td>
<td>Минимальная сумма</td>
</tr>
<tr>
<td><strong>max</strong></td>
<td>нет</td>
<td>Максимальная сумма</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td>нет</td>
<td>Цена</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>нет</td>
<td>Описание</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td>нет</td>
<td>Способ оплаты</td>
</tr>
<tr>
<td><strong>active</strong></td>
<td>нет</td>
<td>Активное ли объявление, <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>private</strong></td>
<td>нет</td>
<td>Приватное ли объявление, <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>auto_increase</strong></td>
<td>нет</td>
<td>Увеличивать ли максимум объявления до баланса авторизованного пользователя автоматически. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>only_verified</strong></td>
<td>нет</td>
<td>Объявление доступно только верифицированным пользователям. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>rating</strong></td>
<td>нет</td>
<td>Минимальный рейтинг контрагента. <strong>NULL</strong>, <strong>100</strong>, <strong>500</strong> и <strong>1000</strong>. По умолчанию - без ограничений</td>
</tr>
</tbody></table>

<div></div>
<h3 id='b34da29f93'>Переключить статус приватности</h3>
<blockquote>
<p>Переключить статус приватности:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}/toggle_private'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3215</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some more text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T18:11:50+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-09T23:05:43+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос переключает статус приватности объявления. Если объявление было приватным, оно становится публичным и наоборот.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-23'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/my/ads/{id}/toggle_private</code></p>
<h3 id='6744ad4c7a-23'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='20b2982a67'>Переключить активность объявления</h3>
<blockquote>
<p>Переключить активность объявления:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}/toggle_active'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3215</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some more text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T18:49:09+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-09T23:05:43+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос переключает статус активности объявления. Если объявление было активным, оно становится неактивным, и наоборот. Неактивное объявление выключается из общего списка объявлений в P2P.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-24'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/my/ads/{id}/toggle_active</code></p>
<h3 id='6744ad4c7a-24'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='0c16fcd6ac'>Отключить все объявления</h3>
<blockquote>
<p>Отключить все объявления:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'direction={direction}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}/deactivate_all'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3380</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rrrrrrrrrrrrr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rrrrrrrrrrrrrr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:05:57+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:39:24+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3378</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"719637.15"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"719637.15"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.45"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ggggggf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ggggggf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:05:57+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:36:45+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Отключить все объявления (статус активности active выставить в false). Можно также отключить только объявления по покупке или только по продаже. Запрос возвращает список деактивированных объявлений</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-25'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/my/ads/{id}/deactivate_all</code></p>
<h3 id='6744ad4c7a-25'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>direction</strong></td>
<td>нет</td>
<td>направление сделок: <strong>sell</strong> или <strong>buy</strong></td>
</tr>
</tbody></table>
