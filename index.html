
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Garantex API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;php&quot;,&quot;javascript&quot;,&quot;python&quot;,&quot;csharp&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-7d8cd5a1.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="php">PHP</a>
              <a href="#" data-language-name="javascript">NodeJS</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="csharp">C#</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#b41a828c58" class="toc-h1 toc-link" data-title="История изменений">История изменений</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#24-03-2022" class="toc-h2 toc-link" data-title="24.03.2022">24.03.2022</a>
                  </li>
                  <li>
                    <a href="#26-07-2021" class="toc-h2 toc-link" data-title="26.07.2021">26.07.2021</a>
                  </li>
                  <li>
                    <a href="#14-11-2020" class="toc-h2 toc-link" data-title="14.11.2020">14.11.2020</a>
                  </li>
                  <li>
                    <a href="#09-11-2020" class="toc-h2 toc-link" data-title="09.11.2020">09.11.2020</a>
                  </li>
                  <li>
                    <a href="#10-05-2020" class="toc-h2 toc-link" data-title="10.05.2020">10.05.2020</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#3394112aa9" class="toc-h1 toc-link" data-title="Введение">Введение</a>
          </li>
          <li>
            <a href="#490e809eef" class="toc-h1 toc-link" data-title="Тестирование">Тестирование</a>
          </li>
          <li>
            <a href="#93900fccba" class="toc-h1 toc-link" data-title="Авторизация">Авторизация</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#jwt" class="toc-h2 toc-link" data-title="JWT-токен">JWT-токен</a>
                  </li>
                  <li>
                    <a href="#ce7d35ddc5" class="toc-h2 toc-link" data-title="Авторизация запросов">Авторизация запросов</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#094c190314" class="toc-h1 toc-link" data-title="Лимиты">Лимиты</a>
          </li>
          <li>
            <a href="#c850ebec42" class="toc-h1 toc-link" data-title="Общая информация">Общая информация</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#47ff48632f" class="toc-h2 toc-link" data-title="Рынки">Рынки</a>
                  </li>
                  <li>
                    <a href="#66f4033be7" class="toc-h2 toc-link" data-title="Валюты">Валюты</a>
                  </li>
                  <li>
                    <a href="#b887de3d80" class="toc-h2 toc-link" data-title="Получить детали валюты">Получить детали валюты</a>
                  </li>
                  <li>
                    <a href="#c80d7e8172" class="toc-h2 toc-link" data-title="Время">Время</a>
                  </li>
                  <li>
                    <a href="#897d03eacd" class="toc-h2 toc-link" data-title="Комиссии">Комиссии</a>
                  </li>
                  <li>
                    <a href="#92dd9b64ca" class="toc-h2 toc-link" data-title="Способы пополнения и вывода фиата">Способы пополнения и вывода фиата</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#market-data" class="toc-h1 toc-link" data-title="Market data">Market data</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#f00f8079b3" class="toc-h2 toc-link" data-title="Сделки">Сделки</a>
                  </li>
                  <li>
                    <a href="#be11d71726" class="toc-h2 toc-link" data-title="Заявки">Заявки</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#5b16fcdd97" class="toc-h1 toc-link" data-title="Аккаунт">Аккаунт</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#df6e209eff" class="toc-h2 toc-link" data-title="Счета">Счета</a>
                  </li>
                  <li>
                    <a href="#51aff18539" class="toc-h2 toc-link" data-title="Пользователь">Пользователь</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#99866db24b" class="toc-h1 toc-link" data-title="Торговые операции">Торговые операции</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#695633f18a" class="toc-h2 toc-link" data-title="История своих сделок">История своих сделок</a>
                  </li>
                  <li>
                    <a href="#5ee94d34a2" class="toc-h2 toc-link" data-title="Список всех последних сделок:">Список всех последних сделок:</a>
                  </li>
                  <li>
                    <a href="#347f4bc1c5" class="toc-h2 toc-link" data-title="Установить заявку">Установить заявку</a>
                  </li>
                  <li>
                    <a href="#1e032a4681" class="toc-h2 toc-link" data-title="Получить список заявок">Получить список заявок</a>
                  </li>
                  <li>
                    <a href="#7a1944f665" class="toc-h2 toc-link" data-title="Получить детали заявки">Получить детали заявки</a>
                  </li>
                  <li>
                    <a href="#38c31abdc2" class="toc-h2 toc-link" data-title="Отменить заявку">Отменить заявку</a>
                  </li>
                  <li>
                    <a href="#eb41402311" class="toc-h2 toc-link" data-title="Отменить все заявки">Отменить все заявки</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#c4da615673" class="toc-h1 toc-link" data-title="Депозиты">Депозиты</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#b3d4caadb3" class="toc-h2 toc-link" data-title="История депозитов">История депозитов</a>
                  </li>
                  <li>
                    <a href="#3e577c2287" class="toc-h2 toc-link" data-title="Информация о депозите">Информация о депозите</a>
                  </li>
                  <li>
                    <a href="#5876f71674" class="toc-h2 toc-link" data-title="Создание депозита">Создание депозита</a>
                  </li>
                  <li>
                    <a href="#6736666fad" class="toc-h2 toc-link" data-title="Адрес для депозита крипты">Адрес для депозита крипты</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#garantex" class="toc-h1 toc-link" data-title="Коды Garantex">Коды Garantex</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#58a6cf1712" class="toc-h2 toc-link" data-title="Выпуск кода">Выпуск кода</a>
                  </li>
                  <li>
                    <a href="#7014b0a527" class="toc-h2 toc-link" data-title="Депозит кода">Депозит кода</a>
                  </li>
                  <li>
                    <a href="#ba93036623" class="toc-h2 toc-link" data-title="Отмена кода">Отмена кода</a>
                  </li>
                  <li>
                    <a href="#3f93ba8579" class="toc-h2 toc-link" data-title="Детали кода">Детали кода</a>
                  </li>
                  <li>
                    <a href="#8e2b63875b" class="toc-h2 toc-link" data-title="История кодов">История кодов</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#23dab7a7ad" class="toc-h1 toc-link" data-title="Выводы">Выводы</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#f8eb11b7d7" class="toc-h2 toc-link" data-title="История выводов">История выводов</a>
                  </li>
                  <li>
                    <a href="#890f5dfe08" class="toc-h2 toc-link" data-title="Информация о выводе">Информация о выводе</a>
                  </li>
                  <li>
                    <a href="#f0e3b97934" class="toc-h2 toc-link" data-title="Создание заявки на вывод">Создание заявки на вывод</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#p2p" class="toc-h1 toc-link" data-title="P2P">P2P</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#p2p-flow" class="toc-h2 toc-link" data-title="P2P flow">P2P flow</a>
                  </li>
                  <li>
                    <a href="#p2p-4" class="toc-h2 toc-link" data-title="P2P-профили">P2P-профили</a>
                  </li>
                  <li>
                    <a href="#3ba5efad4c" class="toc-h2 toc-link" data-title="Чаты">Чаты</a>
                  </li>
                  <li>
                    <a href="#e633323c70" class="toc-h2 toc-link" data-title="Все объявления">Все объявления</a>
                  </li>
                  <li>
                    <a href="#p2p-c" class="toc-h2 toc-link" data-title="P2P-cделки">P2P-cделки</a>
                  </li>
                  <li>
                    <a href="#274d7bcb30" class="toc-h2 toc-link" data-title="Свои объявления">Свои объявления</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#allbacks" class="toc-h1 toc-link" data-title="Сallbacks">Сallbacks</a>
          </li>
          <li>
            <a href="#681b5ae3d2" class="toc-h1 toc-link" data-title="Ошибки">Ошибки</a>
          </li>
          <li>
            <a href="#bad9669b03" class="toc-h1 toc-link" data-title="Инструкции">Инструкции</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://garantex.io/'>Создать аккаунт</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='b41a828c58'>История изменений</h1><h3 id='24-03-2022'>24.03.2022</h3>
<ul>
<li>Документация приведена к актуальному состоянию</li>
<li>Добавлен P2P</li>
</ul>
<h3 id='26-07-2021'>26.07.2021</h3>
<ul>
<li>Coingecko added</li>
</ul>
<h3 id='14-11-2020'>14.11.2020</h3>
<ul>
<li>получение дополнительных депозит адресов: POST /deposit_address, GET /deposit_address/details</li>
</ul>
<h3 id='09-11-2020'>09.11.2020</h3>
<ul>
<li>параметры iss, sub, iat в запросе JWT больше не требуются</li>
<li>запрос /gateway_types теперь требует авторизации</li>
<li>добавлены запросы /depositcodes/create и /depositcodes/redeem для работы с кодами Garantex </li>
</ul>
<h3 id='10-05-2020'>10.05.2020</h3>
<ul>
<li>первая публичная версия API </li>
</ul>
<h1 id='3394112aa9'>Введение</h1>
<p>Для начала работы с API, нужно:</p>

<ul>
<li><p>связаться с саппортом и попросить включить доступ к API</p></li>
<li><p>в настройка профиля включить Google Authenticator</p></li>
<li><p>в настройках <a href='https://garantex.io/settings'>профиля</a> создать пару ключей и ОБЯЗАТЕЛЬНО сохранить приватный ключ к себе - он будет показан только один раз и нигде на стороне сервера не сохраняется.</p></li>
<li><p>выставить ограничения для ключа: тип доступа (<strong>read-only</strong>, <strong>trading</strong>, <strong>withdraw</strong>), время жизни JWT и список ip адресов с которых возможен доступ.</p></li>
</ul>

<aside class="warning">
Никогда не включайте для API ключей права на вывод средств без фильтрации по IP адресу!
</aside>
<h1 id='490e809eef'>Тестирование</h1>
<p>Для тестирования работы с API можно использовать тестовый сервер, stage.garantex.biz.
Тестовый сервер во всём аналогичен рабочему, кроме исполнения депозитов / выводов, и использует копию базы с продакшна.
Если для тестов необходимы дополнительные лимиты на тестовом сервера, они могут быть получены через саппорт.</p>

<p>Актуальная онлайн версия документации по API и инструменты для тестирования методов доступны по адресу: <a href='https://stage.garantex.biz/swagger?url=/api/v2/swagger'>https://stage.garantex.biz/swagger?url=/api/v2/swagger</a></p>

<p>Для авторизации в swagger API ключ нужно указывать как <strong>Bearer {JWT}</strong>, где {JWT} это JWT токен.</p>

<aside class="notice">
Версия API на стейдж сервере может быть более новой и в некоторых моментах отличаться от описанной в документации.   
</aside>
<h1 id='93900fccba'>Авторизация</h1><h2 id='jwt'>JWT-токен</h2>
<blockquote>
<p>Запрос и получение JWT токена:</p>
</blockquote>
<div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'base64'</span>
<span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'securerandom'</span>
<span class="nb">require</span> <span class="s1">'jwt'</span>
<span class="nb">require</span> <span class="s1">'active_support/time'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'net/https'</span>


<span class="n">host</span> <span class="o">=</span> <span class="s1">'garantex.io'</span> <span class="c1"># для тестового сервера используйте stage.garantex.biz</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="s1">'{приватный ключ, полученный на этапе создания API ключей}'</span>
<span class="n">uid</span> <span class="o">=</span> <span class="s1">'{UID, полученный на этапе создания API ключей}'</span>

<span class="n">secret_key</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">PKey</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="no">Base64</span><span class="p">.</span><span class="nf">urlsafe_decode64</span><span class="p">(</span><span class="n">private_key</span><span class="p">))</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">exp: </span><span class="mi">1</span><span class="p">.</span><span class="nf">hours</span><span class="p">.</span><span class="nf">from_now</span><span class="p">.</span><span class="nf">to_i</span><span class="p">,</span> <span class="c1"># JWT Request TTL in seconds since epoch</span>
    <span class="ss">jti: </span><span class="no">SecureRandom</span><span class="p">.</span><span class="nf">hex</span><span class="p">(</span><span class="mi">12</span><span class="p">).</span><span class="nf">upcase</span>
<span class="p">}</span>
<span class="n">jwt_token</span> <span class="o">=</span> <span class="no">JWT</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">secret_key</span><span class="p">,</span> <span class="s1">'RS256'</span><span class="p">)</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"https://dauth.</span><span class="si">#{</span><span class="n">host</span><span class="si">}</span><span class="s2">/api/v1/sessions/generate_jwt"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">path</span><span class="p">,</span> <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">)</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">kid: </span><span class="n">uid</span><span class="p">,</span> <span class="ss">jwt_token: </span><span class="n">jwt_token</span> <span class="p">}.</span><span class="nf">to_json</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">start</span> <span class="p">{</span><span class="o">|</span><span class="n">h</span><span class="o">|</span> <span class="n">h</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)}</span>
<span class="n">data</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">'token'</span><span class="p">]</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// composer require lcobucci/jwt</span>

<span class="c1">// require __DIR__ . '/vendor/autoload.php';</span>
<span class="kn">use</span> <span class="nn">Lcobucci\JWT\Builder</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Lcobucci\JWT\Signer\Key</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Lcobucci\JWT\Signer\Rsa\Sha256</span><span class="p">;</span>

<span class="nv">$host</span> <span class="o">=</span> <span class="s1">'garantex.io'</span><span class="p">;</span> <span class="c1">// для тестового сервера используйте stage.garantex.biz</span>
<span class="nv">$private_key</span> <span class="o">=</span> <span class="s1">'{приватный ключ, полученный на этапе создания API ключей}'</span><span class="p">;</span>
<span class="nv">$uid</span> <span class="o">=</span> <span class="s1">'{UID, полученный на этапе создания API ключей}'</span><span class="p">;</span>

<span class="nv">$time</span>       <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
<span class="nv">$signer</span>     <span class="o">=</span> <span class="k">new</span> <span class="nx">Sha256</span><span class="p">();</span>
<span class="nv">$privateKey</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Key</span><span class="p">(</span><span class="nb">base64_decode</span><span class="p">(</span><span class="nv">$private_key</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span>
<span class="nv">$token</span>      <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nx">Builder</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">identifiedBy</span><span class="p">(</span><span class="nb">bin2hex</span><span class="p">(</span><span class="nb">random_bytes</span><span class="p">(</span><span class="mi">12</span><span class="p">)))</span>
                             <span class="o">-&gt;</span><span class="na">expiresAt</span><span class="p">(</span><span class="nv">$time</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">3600</span><span class="p">)</span> <span class="c1">// JWT Request TTL in seconds since epoch</span>
                             <span class="o">-&gt;</span><span class="na">getToken</span><span class="p">(</span><span class="nv">$signer</span><span class="p">,</span> <span class="nv">$privateKey</span><span class="p">);</span>

<span class="nv">$post_data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'kid'</span> <span class="o">=&gt;</span> <span class="nv">$uid</span><span class="p">,</span> <span class="s1">'jwt_token'</span> <span class="o">=&gt;</span> <span class="nb">strval</span><span class="p">(</span><span class="nv">$token</span><span class="p">)];</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="s2">"https://dauth.</span><span class="nv">$host</span><span class="s2">/api/v1/sessions/generate_jwt"</span><span class="p">);</span>

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="p">[</span>
    <span class="nx">CURLOPT_POST</span>           <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">CURLOPT_HTTPHEADER</span>     <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'Content-Type: application/json'</span><span class="p">],</span>
    <span class="nx">CURLOPT_POSTFIELDS</span>     <span class="o">=&gt;</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$post_data</span><span class="p">)</span>
<span class="p">]);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">)</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Server error: '</span> <span class="o">.</span> <span class="nv">$response</span><span class="p">);</span>

<span class="nv">$token_data</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">([</span><span class="s1">'$token_data'</span> <span class="o">=&gt;</span> <span class="nv">$token_data</span><span class="p">]);</span>
<span class="nv">$token</span> <span class="o">=</span> <span class="nv">$token_data</span><span class="p">[</span><span class="s1">'token'</span><span class="p">];</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// Модули</span>
<span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// npm i axios</span>
<span class="kd">const</span> <span class="nx">jwt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">jsonwebtoken</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// npm i jsonwebtoken</span>
<span class="kd">const</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">crypto</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Константы</span>
<span class="kd">const</span> <span class="nx">host</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">garantex.io</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// для тестового сервера используйте stage.garantex.biz</span>
<span class="kd">const</span> <span class="nx">privateKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">***</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// приватный ключ, полученный на этапе создания API ключей</span>
<span class="kd">const</span> <span class="nx">uid</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">***</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// UID, полученный на этапе создания API ключей</span>

<span class="c1">// Получаем токен</span>
<span class="kd">const</span> <span class="nx">getToken</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
      <span class="dl">"</span><span class="s2">https://dauth.</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">host</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v1/sessions/generate_jwt</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="na">kid</span><span class="p">:</span> <span class="nx">uid</span><span class="p">,</span>
        <span class="na">jwt_token</span><span class="p">:</span> <span class="nx">jwt</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span>
          <span class="p">{</span>
            <span class="na">exp</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span> <span class="c1">// JWT Request TTL: 30 minutes</span>
            <span class="na">jti</span><span class="p">:</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">randomBytes</span><span class="p">(</span><span class="mi">12</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="dl">"</span><span class="s2">hex</span><span class="dl">"</span><span class="p">),</span>
          <span class="p">},</span>
          <span class="k">new</span> <span class="nx">Buffer</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span> <span class="dl">"</span><span class="s2">base64</span><span class="dl">"</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="dl">"</span><span class="s2">ascii</span><span class="dl">"</span><span class="p">),</span>
          <span class="p">{</span> <span class="na">algorithm</span><span class="p">:</span> <span class="dl">"</span><span class="s2">RS256</span><span class="dl">"</span> <span class="p">}</span>
        <span class="p">),</span>
      <span class="p">}</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Тест работоспособности</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
      <span class="dl">"</span><span class="s2">https://</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">host</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/v2/orders/clear</span><span class="dl">"</span><span class="p">,</span>
      <span class="kc">null</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">Authorization</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="k">await</span> <span class="nx">getToken</span><span class="p">()}</span><span class="s2">`</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">}</span>
    <span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># requirements:
# pip3 install 'pyjwt[crypto]'
</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">jwt</span>

<span class="n">private_key</span> <span class="o">=</span> <span class="s">'{приватный ключ, полученный на этапе создания API ключей}'</span>
<span class="n">uid</span> <span class="o">=</span> <span class="s">'{UID, полученный на этапе создания API ключей}'</span>
<span class="n">host</span> <span class="o">=</span> <span class="s">'garantex.io'</span> <span class="c1"># для тестового сервера используйте stage.garantex.biz
</span>
<span class="n">key</span> <span class="o">=</span> <span class="n">base64</span><span class="p">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
<span class="n">iat</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">timetuple</span><span class="p">()))</span>

<span class="n">claims</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"exp"</span><span class="p">:</span> <span class="n">iat</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span> <span class="c1"># JWT Request TTL in seconds since epoch
</span>    <span class="s">"jti"</span><span class="p">:</span> <span class="nb">hex</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">getrandbits</span><span class="p">(</span><span class="mi">12</span><span class="p">)).</span><span class="n">upper</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">jwt_token</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">claims</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s">"RS256"</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"JWT request token: %s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="n">jwt_token</span><span class="p">)</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://dauth.'</span> <span class="o">+</span> <span class="n">host</span> <span class="o">+</span> <span class="s">'/api/v1/sessions/generate_jwt'</span><span class="p">,</span>
                    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s">'kid'</span><span class="p">:</span> <span class="n">uid</span><span class="p">,</span> <span class="s">'jwt_token'</span><span class="p">:</span> <span class="n">jwt_token</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="s">"JWT response code: %d"</span> <span class="o">%</span> <span class="n">ret</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"JWY response text: %s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="n">ret</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

<span class="n">token</span> <span class="o">=</span> <span class="n">ret</span><span class="p">.</span><span class="n">json</span><span class="p">().</span><span class="n">get</span><span class="p">(</span><span class="s">'token'</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"JWT token: %s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="n">token</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight csharp tab-csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IdentityModel.Tokens.Jwt</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Claims</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Security.Cryptography</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.IdentityModel.Tokens</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Newtonsoft.Json</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">grx_asp</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="kt">string</span> <span class="n">privateKey</span> <span class="p">=</span> <span class="n">File</span><span class="p">.</span><span class="nf">ReadAllText</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="nf">GetFolderPath</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="n">SpecialFolder</span><span class="p">.</span><span class="n">MyDocuments</span><span class="p">)</span> <span class="p">+</span> <span class="s">@"\priv.txt"</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">);</span>
        <span class="k">static</span> <span class="kt">string</span> <span class="n">uid</span> <span class="p">=</span> <span class="n">File</span><span class="p">.</span><span class="nf">ReadAllText</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="nf">GetFolderPath</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="n">SpecialFolder</span><span class="p">.</span><span class="n">MyDocuments</span><span class="p">)</span> <span class="p">+</span> <span class="s">@"\uid.txt"</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">);</span>

        <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Use this line to see the crypto info while debugging:</span>
            <span class="c1">// Microsoft.IdentityModel.Logging.IdentityModelEventSource.ShowPII = true;</span>

            <span class="kt">byte</span><span class="p">[]</span> <span class="n">key</span> <span class="p">=</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">FromBase64String</span><span class="p">(</span><span class="n">privateKey</span><span class="p">);</span>
            <span class="n">RSA</span> <span class="n">rsa</span> <span class="p">=</span> <span class="n">RSA</span><span class="p">.</span><span class="nf">Create</span><span class="p">();</span>
            <span class="n">rsa</span><span class="p">.</span><span class="nf">ImportFromPem</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="nf">GetChars</span><span class="p">(</span><span class="n">key</span><span class="p">));</span>

            <span class="kt">var</span> <span class="n">claims</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Claim</span><span class="p">&gt;</span>
            <span class="p">{</span>
              <span class="k">new</span> <span class="nf">Claim</span><span class="p">(</span><span class="n">JwtRegisteredClaimNames</span><span class="p">.</span><span class="n">Jti</span><span class="p">,</span> <span class="n">Guid</span><span class="p">.</span><span class="nf">NewGuid</span><span class="p">().</span><span class="nf">ToString</span><span class="p">()),</span>
              <span class="k">new</span> <span class="nf">Claim</span><span class="p">(</span><span class="n">JwtRegisteredClaimNames</span><span class="p">.</span><span class="n">Exp</span><span class="p">,</span> <span class="n">DateTimeOffset</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">AddMinutes</span><span class="p">(</span><span class="m">60</span><span class="p">).</span><span class="nf">ToUnixTimeSeconds</span><span class="p">().</span><span class="nf">ToString</span><span class="p">())</span>
            <span class="p">};</span>

            <span class="n">SigningCredentials</span> <span class="n">credentials</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SigningCredentials</span><span class="p">(</span><span class="k">new</span> <span class="nf">RsaSecurityKey</span><span class="p">(</span><span class="n">rsa</span><span class="p">),</span> <span class="n">SecurityAlgorithms</span><span class="p">.</span><span class="n">RsaSha256</span><span class="p">);</span>
            <span class="n">JwtSecurityToken</span> <span class="n">jwtSecurity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">JwtSecurityToken</span><span class="p">(</span><span class="k">new</span> <span class="nf">JwtHeader</span><span class="p">(</span><span class="n">credentials</span><span class="p">),</span> <span class="k">new</span> <span class="nf">JwtPayload</span><span class="p">(</span><span class="n">claims</span><span class="p">));</span>
            <span class="kt">string</span> <span class="n">jwt</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">JwtSecurityTokenHandler</span><span class="p">().</span><span class="nf">WriteToken</span><span class="p">(</span><span class="n">jwtSecurity</span><span class="p">);</span>
            <span class="kt">string</span> <span class="n">json</span> <span class="p">=</span> <span class="n">JsonConvert</span><span class="p">.</span><span class="nf">SerializeObject</span><span class="p">(</span><span class="k">new</span> <span class="p">{</span> <span class="n">kid</span> <span class="p">=</span> <span class="n">uid</span><span class="p">,</span> <span class="n">jwt_token</span> <span class="p">=</span> <span class="n">jwt</span> <span class="p">});</span>


            <span class="err">#</span><span class="n">region</span> <span class="n">sync_using_HttpWebRequest</span>
            <span class="n">HttpWebRequest</span> <span class="n">webReq</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebRequest</span><span class="p">)</span><span class="n">WebRequest</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">@"https://dauth.stage.garantex.biz/api/v1/sessions/generate_jwt"</span><span class="p">);</span>
            <span class="kt">byte</span><span class="p">[]</span> <span class="n">data</span> <span class="p">=</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">ASCII</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
            <span class="n">webReq</span><span class="p">.</span><span class="n">Method</span> <span class="p">=</span> <span class="s">"POST"</span><span class="p">;</span>
            <span class="n">webReq</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>
            <span class="n">webReq</span><span class="p">.</span><span class="n">ContentLength</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
            <span class="k">using</span> <span class="p">(</span><span class="n">Stream</span> <span class="n">stream</span> <span class="p">=</span> <span class="n">webReq</span><span class="p">.</span><span class="nf">GetRequestStream</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="n">stream</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="kt">string</span> <span class="n">respStr</span><span class="p">;</span>
            <span class="k">using</span> <span class="p">(</span><span class="n">HttpWebResponse</span> <span class="n">webResp</span> <span class="p">=</span> <span class="p">(</span><span class="n">HttpWebResponse</span><span class="p">)</span><span class="n">webReq</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="k">using</span> <span class="p">(</span><span class="n">StreamReader</span> <span class="n">sr</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">webResp</span><span class="p">.</span><span class="nf">GetResponseStream</span><span class="p">()))</span>
                <span class="p">{</span>
                    <span class="n">respStr</span> <span class="p">=</span> <span class="n">sr</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="err">#</span><span class="n">endregion</span> <span class="n">sync_using_HttpWebRequest</span>


            <span class="err">#</span><span class="n">region</span> <span class="n">async_await_using_HttpClient</span>
            <span class="kt">var</span> <span class="n">httpClient</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>
            <span class="n">HttpContent</span> <span class="n">content</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringContent</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">);</span>
            <span class="n">HttpResponseMessage</span> <span class="n">hrm</span> <span class="p">=</span> <span class="k">await</span> <span class="n">httpClient</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="s">@"https://dauth.stage.garantex.biz/api/v1/sessions/generate_jwt"</span><span class="p">,</span> <span class="n">content</span><span class="p">);</span>
            <span class="n">HttpStatusCode</span> <span class="n">httpStatus</span> <span class="p">=</span> <span class="n">hrm</span><span class="p">.</span><span class="n">StatusCode</span><span class="p">;</span>
            <span class="err">#</span><span class="n">endregion</span> <span class="n">async_await_using_HttpClient</span>


            <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Не забудьте заменить private_key и uid на значения полученные при создании API ключей!</p>
</blockquote>

<p>Garantex использует стандартную схему JWT авторизации (документация: <a href="https://jwt.io/">https://jwt.io/</a> и <a href="https://tools.ietf.org/html/rfc7519">https://tools.ietf.org/html/rfc7519</a>), то есть для работы с методами API вначале нужно запросить у сервера JWT токен, который уже будет использоваться в Bearer аутентификации.</p>

<p>Полученный токен нужно сохранить и использовать его для запросов. Не нужно создавать новый токен на каждый запрос!<br>
Время жизни JWT токена ограничено, и после его истечения токен становится недействительным. </p>

<p>Время жизни JWT определяется <em>параметрами API ключа</em>, и может быть изменено в настройках для каждого API ключа.
Минимальное время жизни JWT 30 минут, максимальное 24 часа. По умолчанию значение TTL 24 часа.   </p>

<p>Справа приведены примеры кода для получения токена на Ruby, PHP и NodeJS.</p>

<p>Параметры JWT запроса:</p>

<ul>
<li>exp - опциональный, время жизни JWT запроса. Не устанавливать его слишком большим и не оставляйте пустым, если вы не планируете переиспользовать запрос многократно.</li>
<li>jti - обязательный, уникальный идентификатор запроса.</li>
<li>алгоритм подписи JWT - <strong>RS256</strong></li>
<li>все остальные опциональные параметры не используются и устанавливать их не обязательно.</li>
</ul>

<p>Для тестов можно использовать форму получения JWT токена на сайте, по адресу:</p>

<ul>
<li><a href="https://stage.garantex.biz/api_test">https://stage.garantex.biz/api_test</a> - стейдж, тестовый сервер. </li>
<li><a href="https://garantex.io/api_test">https://garantex.io/api_test</a> - продакшн, боевой сервер.</li>
</ul>

<p>Для декодирования и проверки токенов можно использовать онлайн отладчик на сайте <a href="https://jwt.io/">https://jwt.io/</a></p>

<aside class="notice">
Не забудьте заменить private_key и uid в примерах на значения полученные при создании API ключей!
</aside>

<aside class="notice">
Ключи полученные на тестовом сервере (https://stage.garantex.biz/) будут работать только на тестовом сервере, а продакшн ключи (https://garantex.io/) - только на продакшне!
</aside>
<h2 id='ce7d35ddc5'>Авторизация запросов</h2>
<blockquote>
<p>Пример GET-запроса (запрос информации об аккаунте):<br>
{JWT} - токен, полученный на предыдущем шаге</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/members/me'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'net/https'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">host</span> <span class="o">=</span> <span class="s1">'garantex.io'</span> <span class="c1"># для тестового сервера используйте stage.garantex.biz</span>
<span class="n">token</span> <span class="o">=</span> <span class="s1">'{JWT}'</span>
<span class="n">custom_headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s2">"Bearer </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">"</span><span class="p">}</span>
<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"https://</span><span class="si">#{</span><span class="n">host</span><span class="si">}</span><span class="s2">/api/v2/members/me"</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">start</span> <span class="n">uri</span><span class="p">.</span><span class="nf">hostname</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">,</span> <span class="ss">use_ssl: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
  <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span> <span class="n">uri</span><span class="p">.</span><span class="nf">request_uri</span>
  <span class="n">custom_headers</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span> <span class="n">request</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span> <span class="p">}</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">request</span> <span class="n">request</span>
<span class="k">end</span>

<span class="k">return</span> <span class="kp">nil</span> <span class="k">unless</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTPResponse</span> <span class="o">===</span> <span class="n">response</span> <span class="c1"># Error occured</span>
<span class="k">return</span> <span class="kp">nil</span> <span class="k">unless</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTPOK</span> <span class="o">===</span> <span class="n">response</span> <span class="c1"># HTTP error with code</span>
<span class="k">return</span> <span class="kp">nil</span> <span class="k">unless</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span> <span class="c1"># Response is empty</span>

<span class="n">account_info</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="nv">$host</span>   <span class="o">=</span> <span class="s1">'garantex.io'</span><span class="p">;</span> <span class="c1">// для тестового сервера используйте stage.garantex.biz</span>
<span class="nv">$token</span>  <span class="o">=</span> <span class="s1">'{JWT}'</span><span class="p">;</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="s1">'https://'</span> <span class="o">.</span> <span class="nv">$host</span> <span class="o">.</span> <span class="s1">'/api/v2/members/me'</span><span class="p">);</span>

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="p">[</span>
    <span class="nx">CURLOPT_HTTPHEADER</span>     <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'Authorization: Bearer '</span> <span class="o">.</span> <span class="nv">$token</span><span class="p">],</span>
    <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">)</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Server error: '</span> <span class="o">.</span> <span class="nv">$response</span><span class="p">);</span>

<span class="nv">$account_info</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">([</span><span class="s1">'$account_info'</span> <span class="o">=&gt;</span> <span class="nv">$account_info</span><span class="p">]);</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">host</span>   <span class="o">=</span> <span class="s">'garantex.io'</span> <span class="o">//</span> <span class="n">для</span> <span class="n">тестового</span> <span class="n">сервера</span> <span class="n">используйте</span> <span class="n">stage</span><span class="p">.</span><span class="n">garantex</span><span class="p">.</span><span class="n">biz</span>
<span class="n">token</span>  <span class="o">=</span> <span class="s">'{JWT}'</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://'</span> <span class="o">+</span> <span class="n">host</span> <span class="o">+</span> <span class="s">'/api/v2/members/me'</span><span class="p">,</span>
                   <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer '</span> <span class="o">+</span> <span class="n">token</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Test request response code: %d"</span> <span class="o">%</span> <span class="n">ret</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Test request response text: %s"</span> <span class="o">%</span> <span class="n">ret</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">ret</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p>Пример POST-запроса (создание вывода в код Garantex):<br>
{JWT} - токен, полученный на предыдущем шаге<br>
{currency} - код фиатной валюты, например rub<br>
{amount} - сумма вывода, например 10000</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-H</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="nt">-d</span> <span class="s1">'currency={currency}&amp;amount={amount}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/depositcodes/create'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'net/https'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">host</span> <span class="o">=</span> <span class="s1">'garantex.io'</span> <span class="o">/</span><span class="sr">/ для тестового сервера используйте stage.garantex.biz
token = '{JWT}'
currency = '{currency}'
amount = '{amount}'
custom_headers = {'Authorization' =&gt; "Bearer </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="sr">"}
uri = URI.parse("https:/</span><span class="o">/</span><span class="c1">#{host}/api/v2/depositcodes/create")</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">start</span> <span class="n">uri</span><span class="p">.</span><span class="nf">hostname</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">,</span> <span class="ss">use_ssl: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
  <span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span> <span class="n">uri</span><span class="p">.</span><span class="nf">request_uri</span>
  <span class="n">custom_headers</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span> <span class="n">request</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span> <span class="p">}</span>
  <span class="n">request</span><span class="p">.</span><span class="nf">set_form_data</span><span class="p">({</span> <span class="ss">currency: </span><span class="n">currency</span><span class="p">,</span> <span class="ss">amount: </span><span class="n">amount</span> <span class="p">})</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">request</span> <span class="n">request</span>
<span class="k">end</span>

<span class="k">return</span> <span class="kp">nil</span> <span class="k">unless</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTPResponse</span> <span class="o">===</span> <span class="n">response</span> <span class="c1"># Error occured</span>
<span class="k">return</span> <span class="kp">nil</span> <span class="k">unless</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTPCreated</span> <span class="o">===</span> <span class="n">response</span> <span class="c1"># HTTP error with code</span>
<span class="k">return</span> <span class="kp">nil</span> <span class="k">unless</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span> <span class="c1"># Response is empty</span>

<span class="n">depositcode_data</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="nv">$host</span> <span class="o">=</span> <span class="s1">'garantex.io'</span><span class="p">;</span> <span class="c1">// для тестового сервера используйте stage.garantex.biz</span>
<span class="nv">$token</span> <span class="o">=</span> <span class="s1">'{JWT}'</span><span class="p">;</span>
<span class="nv">$currency</span> <span class="o">=</span> <span class="s1">'{currency}'</span><span class="p">;</span>
<span class="nv">$amount</span> <span class="o">=</span> <span class="s1">'{amount}'</span><span class="p">;</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="s1">'https://'</span> <span class="o">.</span> <span class="nv">$host</span> <span class="o">.</span> <span class="s1">'/api/v2/depositcodes/create'</span><span class="p">);</span>

<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="p">[</span>
    <span class="nx">CURLOPT_HTTPHEADER</span>     <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'Authorization: Bearer '</span> <span class="o">.</span> <span class="nv">$token</span><span class="p">],</span>
    <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">CURLOPT_POST</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">CURLOPT_POSTFIELDS</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="nv">$currency</span><span class="p">,</span> <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="nv">$amount</span><span class="p">],</span>
<span class="p">]);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">201</span><span class="p">)</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Server error: '</span> <span class="o">.</span> <span class="nv">$response</span><span class="p">);</span>

<span class="nv">$depositcode_data</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">([</span><span class="s1">'$depositcode_data'</span> <span class="o">=&gt;</span> <span class="nv">$depositcode_data</span><span class="p">]);</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">host</span>     <span class="o">=</span> <span class="s">'garantex.io'</span> <span class="o">//</span> <span class="n">для</span> <span class="n">тестового</span> <span class="n">сервера</span> <span class="n">используйте</span> <span class="n">stage</span><span class="p">.</span><span class="n">garantex</span><span class="p">.</span><span class="n">biz</span>
<span class="n">token</span>    <span class="o">=</span> <span class="s">'{JWT}'</span>
<span class="n">currency</span> <span class="o">=</span> <span class="s">'{currency}'</span>
<span class="n">amount</span>   <span class="o">=</span> <span class="s">'{amount}'</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://'</span> <span class="o">+</span> <span class="n">host</span> <span class="o">+</span> <span class="s">'/api/v2/depositcodes/create'</span><span class="p">,</span>
                   <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer '</span> <span class="o">+</span> <span class="n">token</span><span class="p">},</span>
                   <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'currency'</span><span class="p">:</span> <span class="n">currency</span><span class="p">,</span> <span class="s">'amount'</span><span class="p">:</span> <span class="n">amount</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Test request response code: %d"</span> <span class="o">%</span> <span class="n">ret</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Test request response text: %s"</span> <span class="o">%</span> <span class="n">ret</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">ret</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div>
<p>Для запроса данных через API Garantex необходимо использовать <a href="https://tools.ietf.org/html/rfc6750#section-2.1">OAuth 2.0 Bearer аутентификацию</a>.</p>
<h1 id='094c190314'>Лимиты</h1>
<p>При запросах к API существуют лимиты в виде ограничения количества запросов.</p>

<p>Конкретное значение лимита зависит от типа запросов и наличия авторизации. 
Для запросов, не требующий авторизации, ограничения 60 запросов в минуту / 600 запросов в 15 минут / 1800 запросов в час.<br>
Для авторизованных запросов - 30 запросов в минуту / 300 запросов в 15 минут / 900 запросов в час.</p>

<p>Есть группа запросов для которых установлены более жёсткие ограничения:</p>

<ul>
<li><code>POST /api/v2/orders</code></li>
<li><code>POST /api/v2/orders/clear</code></li>
<li><code>POST /api/v2/withdraws/create</code></li>
<li><code>POST /api/v2/depositcodes</code></li>
<li><code>POST /api/v2/deposit_address</code></li>
</ul>

<p>для них лимиты 10 запросов в минуту / 100 запросов в 15 минут / 300 запросов в час.</p>

<p>В случае превышения количества запросов в ответе будет ошибка<br>
<code>429 Too Many Requests</code> - вы превысили допустимую частоту запросов.</p>
<h1 id='c850ebec42'>Общая информация</h1><h2 id='47ff48632f'>Рынки</h2>
<blockquote>
<p>Получить список рынков:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://garantex.io/api/v2/markets"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/RUB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ask_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bid_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_ask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_bid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT/RUB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ask_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bid_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_ask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_bid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.0"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список всех активных рынков.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/markets</code></p>
<h2 id='66f4033be7'>Валюты</h2><h3 id='6c9959ad57'>Получить список всех активных валют</h3>
<blockquote>
<p>Получить список активных валют:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://garantex.io/api/v2/currencies"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usd"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fiat"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_deposit_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"withdraw_min_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"precision"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"explorer_transaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://etherscan.io/tx/#{txid}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"explorer_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://etherscan.io/address/#{address}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockchain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contract_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xdac17f958d2ee523a2206206994597c13d831ec7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_deposit_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"withdraw_min_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"precision"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения списка всех доступных для работы валют.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/currencies</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type</strong></td>
<td>нет</td>
<td>Ограничить вывод криптовалютами / фиатными валютами. Может принимать значения <strong>coin</strong> и <strong>fiat</strong>.</td>
</tr>
</tbody></table>
<h2 id='b887de3d80'>Получить детали валюты</h2>
<blockquote>
<p>Получить детали валюты по ее id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://garantex.io/api/v2/currencies/{id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"฿"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"explorer_transaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.blockchain.com/btc/tx/#{txid}"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"explorer_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.blockchain.com/btc/address/#{address}"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blockchain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_deposit_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0002"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"withdraw_min_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"precision"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения подробных свойств выбранной валюты.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/currencies/{id}</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id выбранной валюты</td>
</tr>
</tbody></table>
<h2 id='c80d7e8172'>Время</h2>
<blockquote>
<p>Получить текущий timestamp:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://garantex.io/api/v2/timestamp"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"2020-05-08T17:58:40+00:00"</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает текущее время сервера</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-4'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/timestamp</code></p>
<h2 id='897d03eacd'>Комиссии</h2><h3 id='95ddcebbec'>Комиссии на вывод крипты</h3>
<blockquote>
<p>Получить значение комиссий на вывод крипты</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://garantex.io/api/v2/fees/withdraw/coin"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0001"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">минимальная</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">для</span><span class="w"> </span><span class="err">вывода</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"small_amount"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">тип</span><span class="w"> </span><span class="err">комиссии</span><span class="p">,</span><span class="w"> </span><span class="err">fixed</span><span class="w"> </span><span class="err">или</span><span class="w"> </span><span class="err">small</span><span class="w"> </span><span class="err">amount</span><span class="w">
        </span><span class="nl">"up_to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">          </span><span class="err">//</span><span class="w"> </span><span class="err">максимальная</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">для</span><span class="w"> </span><span class="err">которой</span><span class="w"> </span><span class="err">применяется</span><span class="w"> </span><span class="err">тип</span><span class="w"> </span><span class="err">комисии</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00005"</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">значение</span><span class="w"> </span><span class="err">комиссии</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0004"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.34"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.17"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает акутальные комиссии на вывод крипты.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-5'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/fees/withdraw/coin</code></p>
<h3 id='bd6108841b'>Возвращаемые значения</h3>
<p>Для некоторых валют могут использоваться разные способы отправки, в зависимости от размера вывода, с разными комиссиями, и тогда массив <strong>fee</strong> будет содержать больше одного элемента, с разными значениями <strong>type</strong>.
Максимальная сумма применимости комиссии будет указана в поле <strong>up_to</strong>.</p>

<p>Например для BTC есть тип отправки <strong>small_amount</strong>, для небольших сумм и с низкой комиссией, и <strong>fixed</strong>, для всего что больше максимального размера (<strong>up_to</strong>) для типа <strong>small_amount</strong>.</p>
<h3 id='1df1346a38'>Комиссии на торговлю</h3>
<blockquote>
<p>Получить значение комиссий на торговлю</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://stage.garantex.biz/api/v2/fees/trading'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ask_fee"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_maker_fee"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_taker_fee"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"bid_fee"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_maker_fee"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_taker_fee"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает акутальные комиссии на вывод крипты.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-6'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/fees/trading</code></p>
<h2 id='92dd9b64ca'>Способы пополнения и вывода фиата</h2>
<blockquote>
<p>Получить список направлений для депозита / вывода фиата</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/gateway_types?currency={currency}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdraw"</span><span class="p">,</span><span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">направление</span><span class="p">,</span><span class="w"> </span><span class="err">deposit</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">withdraw</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">       
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Сбербанк онлайн регионы"</span><span class="p">,</span><span class="w">  
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Вывод на карты региона отличного от Московского."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Введите номер карты региона отличного от Москвы"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">описание</span><span class="w"> </span><span class="err">требуемых</span><span class="w"> </span><span class="err">параметров</span><span class="w"> </span><span class="err">(поле</span><span class="w"> </span><span class="err">address)</span><span class="w">
    </span><span class="nl">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15000.0"</span><span class="p">,</span><span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">минимальная</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">депозита</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">вывода</span><span class="w">
    </span><span class="nl">"max_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3000000.0"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">максимальная</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">депозита</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">вывода</span><span class="w">
    </span><span class="nl">"rounding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">          </span><span class="err">//</span><span class="w"> </span><span class="err">кратность</span><span class="w"> </span><span class="err">суммы</span><span class="w"> 
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">              </span><span class="err">//</span><span class="w"> </span><span class="err">комиссия:</span><span class="w"> </span><span class="err">процент</span><span class="w"> </span><span class="err">от</span><span class="w"> </span><span class="err">суммы</span><span class="w"> </span><span class="err">(</span><span class="mi">2</span><span class="err">%)</span><span class="w">
    </span><span class="nl">"fee_fixed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">комиссия:</span><span class="w"> </span><span class="err">фиксированная</span><span class="w"> </span><span class="err">компонента</span><span class="w">
    </span><span class="nl">"fee_limit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">комиссия:</span><span class="w"> </span><span class="err">максимальный</span><span class="w"> </span><span class="err">размер</span><span class="w"> </span><span class="err">(не</span><span class="w"> </span><span class="err">более</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="err">рублей)</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Наличные любой город РФ"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Прием наличных в любом городе России. Комиссия 2%. От 100 000 рублей."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Свяжитесь с оператором для получения инструкций"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5000000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rounding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">кратность</span><span class="w"> </span><span class="err">суммы</span><span class="w"> </span><span class="err">(</span><span class="mi">100</span><span class="w"> </span><span class="err">рублей)</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">              
    </span><span class="nl">"fee_fixed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee_limit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список всех активных направлений ввода / вывода для фиата</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-7'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/gateway_types</code></p>
<h3 id='6744ad4c7a-3'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>да</td>
<td>Код фиатной валюты</td>
</tr>
<tr>
<td><strong>direction</strong></td>
<td>нет</td>
<td>Направление, <strong>deposit</strong> или <strong>withdraw</strong></td>
</tr>
</tbody></table>
<h1 id='market-data'>Market data</h1><h2 id='f00f8079b3'>Сделки</h2>
<blockquote>
<p>Получить список сделок по рынку</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://garantex.io/api/v2/trades?market={market}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34786</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.8"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">цена</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"757.51"</span><span class="p">,</span><span class="w">   </span><span class="err">//</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">в</span><span class="w"> </span><span class="err">базовой</span><span class="w"> </span><span class="err">валюте</span><span class="w">
    </span><span class="nl">"funds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"52116.84"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">в</span><span class="w"> </span><span class="err">валюте</span><span class="w"> </span><span class="err">котировки</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">рынок</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-25T12:54:22+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34785</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85.06"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5834.93"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-22T19:31:41+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает историю сделок по выбранному рынку</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/trades</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>market</strong></td>
<td>да</td>
<td>ID рынка</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество записей в выборке, по умолчанию 50. Максимум - 1000</td>
</tr>
<tr>
<td><strong>timestamp</strong></td>
<td>нет</td>
<td>Время по которое получить выборку, формат - unix timestamp</td>
</tr>
<tr>
<td><strong>from</strong></td>
<td>нет</td>
<td>ID сделки начиная с которой (но не включая) получить выборку</td>
</tr>
<tr>
<td><strong>to</strong></td>
<td>нет</td>
<td>ID сделки по которую (но не включая) получить выборку</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td>нет</td>
<td>Направление сортировки, <strong>asc</strong> / <strong>desc</strong>. По умолчанию <strong>desc</strong>, последняя сделка сверху</td>
</tr>
</tbody></table>
<h2 id='be11d71726'>Заявки</h2>
<blockquote>
<p>Получить список заявок для рынка</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://garantex.io/api/v2/depth?market={market}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1648047486</span><span class="p">,</span><span class="w">
  </span><span class="nl">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"156612.04"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.23625259"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37000.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.008"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">тип</span><span class="w"> </span><span class="err">цены:</span><span class="w"> </span><span class="err">factor</span><span class="w"> </span><span class="err">или</span><span class="w"> </span><span class="err">limit</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"157006.78"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00003591"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.64"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.011"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"factor"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"153590.1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.04143581"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6364.13"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-0.011"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"factor"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"152074.67"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.26302868"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40000.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-0.021"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает состояние &quot;стаканов&quot; по выбранному рынку.
Заявки отсортированы в порядке возрастания цены для продажи и убывания цены для покупки.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/depth</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>market</strong></td>
<td>да</td>
<td>ID рынка</td>
</tr>
</tbody></table>
<h1 id='5b16fcdd97'>Аккаунт</h1><h2 id='df6e209eff'>Счета</h2><h3 id='63d94e3c3f'>Получить список всех пользовательских счетов</h3>
<blockquote>
<p>Получить список счетов:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> GET <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/accounts"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.83001049"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91164.92"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"288570.5"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1989.85"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения списка всех счетов пользователя и остатков по ним.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/accounts</code></p>
<h3 id='11568b4fa7'>Получить состояние пользовательского счета по конкретной валюте</h3>
<blockquote>
<p>Получить состояние счета для валюты:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> GET <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/accounts/btc"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.83001049"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения остатков по счёту в конкретной валюте.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/accounts/{currency_id}</code></p>
<h2 id='51aff18539'>Пользователь</h2><h3 id='1df8c597eb'>Получение информации о текущем пользователе.</h3>
<blockquote>
<p>Получить информацию о текущем пользователе:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> GET <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/members/me"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"sn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SNXXXXXXXXXX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@garantex.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"p2p_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.83001049"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allowed_withdraw_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"91164.92"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"288570.5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allowed_withdraw_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7207469.72"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1989.85"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allowed_withdraw_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3348.49"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения информации о текущем пользователе и балансе счетов.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/members/me</code></p>
<h3 id='258d17bc40'>Получение информации о доступах текущего пользователя.</h3>
<blockquote>
<p>Получить доступы текущего пользователя:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> GET <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/members/api_key"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89c134ad-04b7-4fab-bf2d-52831c023a1a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1st key"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ip_restrictions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.0.0/0,::/0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trading_permitted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"withdrawals_permitted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"otc_permitted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения информации о наличии у текущего пользователя прав на те или иные api операции</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-4'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/members/api_key</code></p>
<h1 id='99866db24b'>Торговые операции</h1><h2 id='695633f18a'>История своих сделок</h2>
<blockquote>
<p>Получить список своих сделок:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/trades/my?market={market_id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">68966</span><span class="p">,</span><span class="w">              </span><span class="err">//</span><span class="w"> </span><span class="err">id</span><span class="w"> </span><span class="err">сделки</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">60489</span><span class="p">,</span><span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">id</span><span class="w"> </span><span class="err">заяки</span><span class="w"> </span><span class="err">по</span><span class="w"> </span><span class="err">которой</span><span class="w"> </span><span class="err">прошла</span><span class="w"> </span><span class="err">сделка</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">рынок</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">валюта</span><span class="w"> </span><span class="err">продажи</span><span class="w">
    </span><span class="nl">"funds_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">валюта</span><span class="w"> </span><span class="err">покупки</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.91"</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">цена</span><span class="w"> 
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.84"</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">продажи</span><span class="w">
    </span><span class="nl">"funds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"402.46"</span><span class="p">,</span><span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">покупки</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">комиссия</span><span class="w"> </span><span class="err">(процент)</span><span class="w">
    </span><span class="nl">"fee_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">комиссия</span><span class="w"> </span><span class="err">(размер)</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-07T11:46:47+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="err">направление:</span><span class="w"> </span><span class="err">покупка</span><span class="w"> </span><span class="err">или</span><span class="w"> </span><span class="err">продажа</span><span class="w"> </span><span class="err">(в</span><span class="w"> </span><span class="err">терминах</span><span class="w"> </span><span class="err">базовой</span><span class="w"> </span><span class="err">валюты</span><span class="w"> </span><span class="err">рынка)</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">68935</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">60447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.54"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"510.62"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.51"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-07T11:09:01+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">  
</span></code></pre></div>
<p>Запрос возвращает историю сделок пользователя по выбранному рынку.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/trades/my</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>market</strong></td>
<td>нет</td>
<td>ID рынка</td>
</tr>
<tr>
<td><strong>timestamp</strong></td>
<td>нет</td>
<td>Время по которое получить выборку, формат - unix timestamp</td>
</tr>
<tr>
<td><strong>from</strong></td>
<td>нет</td>
<td>ID сделки начиная с которой (но не включая) получить выборку</td>
</tr>
<tr>
<td><strong>to</strong></td>
<td>нет</td>
<td>ID сделки по которую (но не включая) получить выборку</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td>нет</td>
<td>Направление сортировки, asc / desc. По умолчанию desc, последняя сделка сверху</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество записей, по умолчанию 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>С какой записи начинать</td>
</tr>
</tbody></table>

<aside class="notice">
Обратите внимание: информация о сделках передаётся как валюта + сумма продажи - валюта + сумма покупки, а не исходя из базовой валюты / валюты котировки!
</aside>
<h2 id='5ee94d34a2'>Список всех последних сделок:</h2>
<blockquote>
<p>Получить список всех последних сделок:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/trades?market={market_id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">148344</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4336282.57"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.21909204"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"950021.63"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-14T15:24:20+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">148343</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3879648.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0386633"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-14T15:24:20+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">  
</span></code></pre></div>
<p>Запрос возвращает последние сделки по выбранному рынку с возможностью фильтрации.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/trades</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>market</strong></td>
<td>нет</td>
<td>ID рынка</td>
</tr>
<tr>
<td><strong>timestamp</strong></td>
<td>нет</td>
<td>Время по которое получить выборку, формат - unix timestamp</td>
</tr>
<tr>
<td><strong>from</strong></td>
<td>нет</td>
<td>ID сделки начиная с которой (но не включая) получить выборку</td>
</tr>
<tr>
<td><strong>to</strong></td>
<td>нет</td>
<td>ID сделки по которую (но не включая) получить выборку</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td>нет</td>
<td>Направление сортировки, asc / desc. По умолчанию desc, последняя сделка сверху</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество записей, по умолчанию 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>С какой записи начинать</td>
</tr>
</tbody></table>
<h2 id='347f4bc1c5'>Установить заявку</h2>
<blockquote>
<p>Установить заявку</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="nt">-d</span> <span class="s1">'market={market_id}&amp;side={side}&amp;volume={order_volume}&amp;ord_type={order_type}&amp;fix_price={fix_price}'</span> <span class="s2">"https://garantex.io/api/v2/orders"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">60998</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remaining_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">остаток</span><span class="w"> </span><span class="err">объёма</span><span class="w"> </span><span class="err">к</span><span class="w"> </span><span class="err">продаже</span><span class="w"> </span><span class="err">по</span><span class="w"> </span><span class="err">заявке</span><span class="w"> </span><span class="err">(в</span><span class="w"> </span><span class="err">терминах</span><span class="w"> </span><span class="err">продал</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">купил)</span><span class="p">,</span><span class="w"> </span><span class="err">для</span><span class="w"> </span><span class="err">типа</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">оставшаяся</span><span class="w"> </span><span class="err">к</span><span class="w"> </span><span class="err">откупу</span><span class="w"> </span><span class="err">сумма</span><span class="w">
  </span><span class="nl">"executed_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">средства</span><span class="w"> </span><span class="err">израсходованные</span><span class="w"> </span><span class="err">по</span><span class="w"> </span><span class="err">заявке</span><span class="w"> </span><span class="err">(в</span><span class="w"> </span><span class="err">терминах</span><span class="w"> </span><span class="err">продал</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">купил)</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">начальный</span><span class="w"> </span><span class="err">объём</span><span class="w"> </span><span class="err">заявки</span><span class="w"> </span><span class="err">(в</span><span class="w"> </span><span class="err">терминах</span><span class="w"> </span><span class="err">продал</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">купил)</span><span class="p">,</span><span class="w"> </span><span class="err">для</span><span class="w"> </span><span class="err">типа</span><span class="w"> </span><span class="err">market</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">ожидаемая</span><span class="w"> </span><span class="err">к</span><span class="w"> </span><span class="err">получению</span><span class="w"> </span><span class="err">сумма</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ask"</span><span class="p">,</span><span class="w">               </span><span class="err">//</span><span class="w"> </span><span class="err">направление</span><span class="w"> </span><span class="err">заявки</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">ask</span><span class="w"> </span><span class="err">или</span><span class="w"> </span><span class="err">bid</span><span class="w">
  </span><span class="nl">"ord_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">тип</span><span class="w"> </span><span class="err">заявки:</span><span class="w"> </span><span class="err">default</span><span class="p">,</span><span class="w"> </span><span class="err">market</span><span class="p">,</span><span class="w"> </span><span class="err">factor</span><span class="w"> </span><span class="err">или</span><span class="w"> </span><span class="err">limit</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wait"</span><span class="p">,</span><span class="w">             </span><span class="err">//</span><span class="w"> </span><span class="err">состояние</span><span class="w"> </span><span class="err">заявки:</span><span class="w"> </span><span class="err">wait</span><span class="p">,</span><span class="w"> </span><span class="err">done</span><span class="p">,</span><span class="w"> </span><span class="err">cancel</span><span class="w">
  </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">             </span><span class="err">//</span><span class="w"> </span><span class="err">цена</span><span class="w"> </span><span class="err">в</span><span class="w"> </span><span class="err">процентах</span><span class="w"> </span><span class="err">от</span><span class="w"> </span><span class="err">базового</span><span class="w"> </span><span class="err">рынка</span><span class="w"> </span><span class="err">(для</span><span class="w"> </span><span class="err">типа</span><span class="w"> </span><span class="err">factor)</span><span class="w">
  </span><span class="nl">"fix_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.9"</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">фиксированная</span><span class="w"> </span><span class="err">цена</span><span class="w"> </span><span class="err">(для</span><span class="w"> </span><span class="err">типа</span><span class="w"> </span><span class="err">limit)</span><span class="w">
  </span><span class="nl">"funds_received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">     </span><span class="err">//</span><span class="w"> </span><span class="err">средства</span><span class="w"> </span><span class="err">полученные</span><span class="w"> </span><span class="err">по</span><span class="w"> </span><span class="err">заявке</span><span class="w"> </span><span class="err">(в</span><span class="w"> </span><span class="err">терминах</span><span class="w"> </span><span class="err">продал</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">купил)</span><span class="w">
  </span><span class="nl">"funds_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">          </span><span class="err">//</span><span class="w"> </span><span class="err">размер</span><span class="w"> </span><span class="err">комиссии</span><span class="w"> </span><span class="err">заплаченной</span><span class="w"> </span><span class="err">с</span><span class="w"> </span><span class="err">полученных</span><span class="w"> </span><span class="err">средств</span><span class="w">
  </span><span class="nl">"trades_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">количество</span><span class="w"> </span><span class="err">сделок</span><span class="w"> </span><span class="err">прошедших</span><span class="w"> </span><span class="err">по</span><span class="w"> </span><span class="err">заявке</span><span class="w">
  </span><span class="nl">"avg_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">              </span><span class="err">//</span><span class="w"> </span><span class="err">средняя</span><span class="w"> </span><span class="err">цена</span><span class="w"> </span><span class="err">исполненных</span><span class="w"> </span><span class="err">по</span><span class="w"> </span><span class="err">заявке</span><span class="w"> </span><span class="err">сделок</span><span class="w">
  </span><span class="nl">"executed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">исполненная</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">в</span><span class="w"> </span><span class="err">базовой</span><span class="w"> </span><span class="err">валюте</span><span class="w"> </span><span class="err">рынка</span><span class="w">
  </span><span class="nl">"quote_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">исполненная</span><span class="w"> </span><span class="err">сумма</span><span class="w"> </span><span class="err">в</span><span class="w"> </span><span class="err">валюте</span><span class="w"> </span><span class="err">котировки</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-10T11:59:32+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-10T11:59:32+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос создаёт завку на покупку / продажу для выбранного рынка.</p>

<ul>
<li>требуемый уровень доступа: <strong>trading</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/orders</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>market</strong></td>
<td>да</td>
<td>ID рынка</td>
</tr>
<tr>
<td><strong>volume</strong></td>
<td>да</td>
<td>Cумма в валюте продажи</td>
</tr>
<tr>
<td><strong>side</strong></td>
<td>да</td>
<td>Направление заявки, <strong>buy</strong> или <strong>sell</strong></td>
</tr>
<tr>
<td><strong>ord_type</strong></td>
<td>да</td>
<td>Тип заявки <ul><li>default</li><li>market</li><li>factor</li><li>limit</li></ul></td>
</tr>
<tr>
<td><strong>fix_price</strong></td>
<td>нет</td>
<td>Фикcированная цена, необходим для ord_type: <strong>limit</strong></td>
</tr>
<tr>
<td><strong>factor</strong></td>
<td>нет</td>
<td>Цена в процентах от базового рынка, необходим для ord_type: <strong>factor</strong>,<br>либо максимальное отклонение в процентах от базового рынка для ord_type: <strong>market</strong> или <strong>default</strong></td>
</tr>
</tbody></table>
<h3 id='6baa143891'>Типы заявок</h3>
<ul>
<li><strong>limit</strong>: классический тип ордера, исполнение по заданной цене. Не предназначен для криптопар.</li>
<li><strong>factor</strong>: цена исполения ордера определяется как отклонение от цены целевого рынка. Для btcrub это композит Binance BTCUSDT * MOEX USDRUB_TOM, для usdtrub - пара MOEX USDRUB_TOM. Не предназначен для криптопар.</li>
<li><strong>default</strong>: исполнение по рынку, сумма указывается в той валюте которая у вас есть. То есть, для sell btсrub это BTC, для buy btcrub - RUB.</li>
<li><strong>market</strong>: исполнение по рынку, сумма указывается в той валюте которую вы хотите получить. То есть, для sell btсrub это RUB, для buy btcrub - BTC.</li>
</ul>
<h3 id='1df4b9d2dc'>Цена заявки</h3>
<ul>
<li><strong>fix_price</strong>: классический вариант, исполнение по указанной цене пары.</li>
<li><strong>factor</strong>: процент отклонения от цены целевого рынка. Минимальное значение: -0.2, максимальное: +0.2.</li>
</ul>

<aside>Для типов заявки market и default, значение factor используется как ограничитель для минимальной / максимальной цены исполнения  . Если factor не указан, то его значение выставляется как 0.2 для покупки и -0.2 для продажи.</aside>
<h2 id='1e032a4681'>Получить список заявок</h2>
<blockquote>
<p>Получить список заявок</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/orders?market={market}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">262876</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"remaining_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executed_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ask"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ord_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fix_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trades_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avg_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-23T16:37:23+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-23T16:37:23+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список своих заявок с возможностью фильтрации</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/orders</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>market</strong></td>
<td>да</td>
<td>ID рынка</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>нет</td>
<td>Состояние заявки - <strong>wait</strong>, <strong>done</strong>, <strong>cancel</strong></td>
</tr>
<tr>
<td><strong>page</strong></td>
<td>нет</td>
<td>Страница при постраничном разбиении (deprecated)</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td>нет</td>
<td>Сортировка. <strong>desc</strong> или <strong>asc</strong>, по умолчанию <strong>desc</strong></td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество записей, по умолчанию 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>С какой записи начинать</td>
</tr>
</tbody></table>
<h2 id='7a1944f665'>Получить детали заявки</h2>
<blockquote>
<p>Получить детали заявки</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/order?id={id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">262876</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btcrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"remaining_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executed_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ask"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ord_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fix_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trades_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avg_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-23T16:37:23+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-23T16:37:23+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает детали своей заявки по ее ID</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/order</code></p>
<h3 id='6744ad4c7a-3'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>ID заявки</td>
</tr>
</tbody></table>
<h2 id='38c31abdc2'>Отменить заявку</h2>
<blockquote>
<p>Отменить заявку</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="nt">-d</span> <span class="s1">'id={order_id}'</span> <span class="s2">"https://garantex.io/api/v2/order/delete"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">60998</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remaining_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"52.91"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47.09"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ask"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ord_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wait"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fix_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"funds_received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3244.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"funds_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.24"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trades_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"avg_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47.09"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3244.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-10T11:59:32+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-10T13:57:20+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос для отмены заявки с указанным ID</p>

<ul>
<li>требуемый уровень доступа: <strong>trading</strong></li>
</ul>
<h4 id='http-request-4'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/order/delete</code></p>
<h3 id='6744ad4c7a-4'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>ID заявки</td>
</tr>
</tbody></table>

<aside>Возвращается состояние заявки ДО ОТМЕНЫ.</aside>
<h2 id='eb41402311'>Отменить все заявки</h2>
<blockquote>
<p>Отменить все заявки </p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span>  <span class="s2">"https://garantex.io/api/v2/orders/clear"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">262882</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"remaining_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executed_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ask"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ord_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wait"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fix_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"234.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trades_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avg_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-23T17:31:38+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-23T17:31:38+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">262702</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdtrub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"remaining_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1453.45"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executed_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1453.45"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ord_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wait"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"factor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fix_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_received"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funds_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trades_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avg_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-26T00:18:17+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-26T00:18:17+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос для отмены всех активных заявок, с возможностью фильтрации по рынку / направлению</p>

<ul>
<li>требуемый уровень доступа: <strong>trading</strong></li>
</ul>
<h4 id='http-request-5'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/orders/clear</code></p>
<h3 id='6744ad4c7a-5'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>market</strong></td>
<td>нет</td>
<td>ID рынка</td>
</tr>
<tr>
<td><strong>side</strong></td>
<td>нет</td>
<td>Направление заявки: <strong>sell</strong> или <strong>buy</strong></td>
</tr>
</tbody></table>

<aside>Возвращается состояние подходящих по критерию заявок ДО ФАКТИЧЕСКОЙ ОТМЕНЫ.</aside>
<h1 id='c4da615673'>Депозиты</h1><h2 id='b3d4caadb3'>История депозитов</h2>
<blockquote>
<p>Получить список депозитов:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/deposits"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">36931</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fiat"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Наличные касса Москва: "</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-23T10:10:23+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-23T10:10:36+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">36354</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fiat"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"код пополнения: TGJ0C5IYM62PBDR8HAQO"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-05T23:13:01+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-05T23:13:01+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">36060</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"640.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x88178478a5df7c3dd0a53dddf70fc0c092f5fc4b0fff6f3058381f99c7e92abe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">9606704</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">23212</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xda36a74ca59f8816dc330fae1074223aa89833a1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T22:49:13+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T22:50:05+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Получение списка депозитов пользователя.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/deposits</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>нет</td>
<td>Код валюты, например <strong>aed</strong>, <strong>aff</strong>, <strong>btc</strong>, <strong>btc-bbtc</strong>, <strong>btc-bsc</strong>, <strong>dai</strong>, <strong>dai-bsc</strong>, <strong>eth</strong>, <strong>eth-bsc</strong>, <strong>rub</strong>, <strong>uah</strong>, <strong>usd</strong>, <strong>usdt</strong>, <strong>usdt-bsc</strong>, <strong>usdt-omni</strong>, <strong>usdt-tron</strong></td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>нет</td>
<td>Статус. Может быть <strong>submitted</strong>, <strong>rejected</strong>, <strong>accepted</strong>, <strong>suspected</strong>, <strong>processing</strong>, <strong>pending</strong>, <strong>succeed</strong>, <strong>canceled</strong>, <strong>confirming</strong>, <strong>fraudulent</strong></td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество результатов в ответе, по умолчанию 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>С какой записи по номеру начинать</td>
</tr>
<tr>
<td><strong>start_time</strong></td>
<td>нет</td>
<td>С какой записи по времени создания начинать, по умолчанию - без ограничений</td>
</tr>
<tr>
<td><strong>end_time</strong></td>
<td>нет</td>
<td>По какую запись возвращать результат. По умолчанию - текущий таймстэмп</td>
</tr>
</tbody></table>
<h3 id='bd6108841b'>Возвращаемые значения</h3>
<p>Обратите внимание, поля в возвращаемом списке различаются для фиатных и крипто депозитов!</p>

<p>Для крипты добавляются поля <strong>txid</strong>, <strong>block_number</strong> и <strong>confirmations</strong>.</p>
<h2 id='3e577c2287'>Информация о депозите</h2>
<blockquote>
<p>Получить детали депозита по deposit_id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/deposit/{deposit_id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">36060</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"640.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x88178478a5df7c3dd0a53dddf70fc0c092f5fc4b0fff6f3058381f99c7e92abe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"block_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">9606704</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">23212</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xda36a74ca59f8816dc330fae1074223aa89833a1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T22:49:13+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T22:50:05+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='id'>Получение детальной информации о депозите по ID</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/deposit/{deposit_id}</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deposit_id</strong></td>
<td>да</td>
<td>ID депозита полученное при его создании / из истории депозитов</td>
</tr>
</tbody></table>
<h3 id='bd6108841b-2'>Возвращаемые значения</h3>
<p>Обратите внимание, поля в возвращаемом списке различаются для фиатных и крипто депозитов!</p>

<p>Для крипты добавляются поля <strong>txid</strong>, <strong>block_number</strong> и <strong>confirmations</strong>.</p>

<blockquote>
<p>Получить детали депозита по txid:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/deposit?txid={txid}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">36060</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"640.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x88178478a5df7c3dd0a53dddf70fc0c092f5fc4b0fff6f3058381f99c7e92abe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"block_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">9606704</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">23212</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xda36a74ca59f8816dc330fae1074223aa89833a1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T22:49:13+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T22:50:05+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='txid'>Получение детальной информации о депозите по txid транзакции</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/deposit</code></p>
<h3 id='6744ad4c7a-3'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>txid</strong></td>
<td>да</td>
<td>txid транзакции в блокчейне</td>
</tr>
</tbody></table>
<h2 id='5876f71674'>Создание депозита</h2>
<blockquote>
<p>Создать заявку на депозит:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-H</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="nt">-d</span> <span class="s1">'currency={currency_id}&amp;amount={amount}&amp;gateway_type_id={gateway_type_id}'</span> <span class="s1">'https://garantex.io/api/v2/deposits/create'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">36960</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fiat"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Наличные касса Москва: "</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-08T20:33:58+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='e3f9070304'>Создание заявки на внос средств.</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-4'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/deposits/create</code></p>
<h3 id='6744ad4c7a-4'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>да</td>
<td>Код фиатной валюты (rub)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>да</td>
<td>Размер депозита</td>
</tr>
<tr>
<td><a href='#92dd9b64ca'>gateway_type_id</a></td>
<td>да</td>
<td>ID выбранного метода пополнения</td>
</tr>
<tr>
<td><strong>data</strong></td>
<td>нет</td>
<td>JSON поле с дополнительной информацией о депозите, необходимость и формат поля зависят от выбранного метода пополнения</td>
</tr>
<tr>
<td><strong>address</strong></td>
<td>нет</td>
<td>Информация об адресе депозита, необходимость и формат поля зависят от выбранного метода пополнения</td>
</tr>
</tbody></table>
<h2 id='6736666fad'>Адрес для депозита крипты</h2>
<blockquote>
<p>Получить адрес для депозита крипты:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/deposit_address?currency={currency_id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt-omni"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3DVQ9WL2rTjBm1q7UHwWAQdNCKveFRJCYk"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='41b3c4e012'>Получение актуального адреса для депозита крипты</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-5'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/deposit_address</code></p>
<h3 id='6744ad4c7a-5'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>да</td>
<td>ID валюты для депозита</td>
</tr>
</tbody></table>

<blockquote>
<p>Получить дополнительный адрес для депозита крипты:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="nt">-d</span> <span class="s2">"currency=btc"</span> <span class="s2">"https://garantex.io/api/v2/deposit_address"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6789</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='0ee67631ae'>Получение дополнительного адреса для депозита крипты</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-6'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/deposit_address</code></p>
<h3 id='6744ad4c7a-6'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>да</td>
<td>ID валюты для депозита</td>
</tr>
</tbody></table>
<h3 id='bd6108841b-3'>Возвращаемые значения</h3>
<p>Обратите внимание, значение адреса в ответе может быть null! 
Это нормальная ситуация, так как создание нового адреса занимает время, и в таком случае фактический адрес должен быть получен отдельно,
запросом <code>/deposit_address/details</code>.</p>

<blockquote>
<p>Получить детальную информации о конкретном депозит адресе</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="nt">-d</span> <span class="s2">"currency=btc"</span> <span class="s2">"https://garantex.io/api/v2/deposit_address/details?id={id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6789</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blockchain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3Qtj2uSv2AV7S86iTzJW1RwCoNKzGrJFyJ"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='0ec97bac14'>Получение детальной информации о конкретном депозит адресе</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-7'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/deposit_address/details</code></p>
<h3 id='6744ad4c7a-7'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>ID депозит адреса</td>
</tr>
</tbody></table>
<h3 id='bd6108841b-4'>Возвращаемые значения</h3>
<p>Обратите внимание, значение адреса в ответе может быть null! 
Это нормальная ситуация, так как создание нового адреса занимает время, и в таком случае запрос необходимо повторить позже.</p>

<p>Кроме того, в ответе будет указан не код валюты, но код блокчейна, так как адреса валидны для всех валют которые поддерживаются на этом блокчейне. </p>
<h3 id='9b6a512f8e'>Мульти-блокчейн валюты</h3>
<p>Для валют которые используют больше чем один блокчейн, по умолчанию возвращается адрес для &quot;основного&quot; блокчейна.
При необходимости получить адрес из другого блокчейна, он указывается через дефис, например usdt-omni.</p>

<blockquote>
<p>Получить детальную информации о конкретном депозит адресе</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="nt">-d</span> <span class="s2">"currency=btc"</span> <span class="s2">"https://garantex.io/api/v2/deposit_address/{id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6789</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blockchain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3Qtj2uSv2AV7S86iTzJW1RwCoNKzGrJFyJ"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='0ec97bac14-2'>Получение детальной информации о конкретном депозит адресе</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-8'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/deposit_address/{id}</code></p>
<h3 id='6744ad4c7a-8'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>ID депозит адреса</td>
</tr>
</tbody></table>
<h3 id='bd6108841b-5'>Возвращаемые значения</h3>
<p>Обратите внимание, значение адреса в ответе может быть null! 
Это нормальная ситуация, так как создание нового адреса занимает время, и в таком случае запрос необходимо повторить позже.</p>

<p>Кроме того, в ответе будет указан не код валюты, но код блокчейна, так как адреса валидны для всех валют которые поддерживаются на этом блокчейне. </p>
<h3 id='9b6a512f8e-2'>Мульти-блокчейн валюты</h3>
<p>Для валют которые используют больше чем один блокчейн, по умолчанию возвращается адрес для &quot;основного&quot; блокчейна.
При необходимости получить адрес из другого блокчейна, он указывается через дефис, например usdt-omni.</p>

<blockquote>
<p>Получить писок депозит-адресов:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="nt">-d</span> <span class="s2">"currency=btc"</span> <span class="s2">"https://garantex.io/api/v2/deposit_address/list"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2813</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3KVWYcm3Avkj8cDzmt2TAVYwGei48awQyY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockchain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-16T15:56:54.000+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19610</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"blockchain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-13T17:17:56.779+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='2a1dc429b6'>Получение списка всех депозит-адресов пользователя</h3>
<p>Запрос позволяет получить все депозит-адреса авторизованного пользователя для определенной валюты или блокчейна. Обязательно указать только один из двух параметров.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-9'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/deposit_address/list</code></p>
<h3 id='6744ad4c7a-9'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>blockchain</strong></td>
<td>1/2</td>
<td>Код блокчейна, например <strong>btc</strong> или <strong>omni-usdt</strong> или <strong>ethereum</strong></td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>1/2</td>
<td>Код валюты, например <strong>btc</strong> или <strong>DAI-BSC</strong> или <strong>usdt-tron</strong> (можно использовать верхний регистр)</td>
</tr>
</tbody></table>
<h1 id='garantex'>Коды Garantex</h1><h2 id='58a6cf1712'>Выпуск кода</h2>
<blockquote>
<p>Вывод в средств в код:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-H</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="nt">-d</span> <span class="s1">'currency={currency}&amp;amount={amount}'</span> <span class="s1">'https://garantex.io/api/v2/depositcodes/create'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34766</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OB34XF7YWOQBMSGAUEAP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"used"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T18:49:13.495+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"used_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='b665cc3539'>Вывод в средств в код.</h3>
<ul>
<li>требуемый уровень доступа: <strong>withdraw</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/depositcodes/create</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>да</td>
<td>Код фиатной валюты (rub)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>да</td>
<td>Сумма для вывода</td>
</tr>
<tr>
<td><strong>label</strong></td>
<td>нет</td>
<td>Пометка для нотификаций</td>
</tr>
</tbody></table>
<h2 id='7014b0a527'>Депозит кода</h2>
<blockquote>
<p>Депозит кода:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-H</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="nt">-d</span> <span class="s1">'deposit_code={deposit_code}'</span> <span class="s1">'https://garantex.io/api/v2/depositcodes/redeem'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34765</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PFIJC5YNZW7RMLRVOO6K"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"used"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T18:35:11.862+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"used_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T18:35:25.607+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='eb5e354ee6'>Депозит кода.</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/depositcodes/redeem</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deposit_code</strong></td>
<td>да</td>
<td>Код</td>
</tr>
</tbody></table>
<h2 id='ba93036623'>Отмена кода</h2>
<blockquote>
<p>Отмена кода:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-H</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="nt">-d</span> <span class="s1">'id=34769'</span> <span class="s1">'https://garantex.io/api/v2/depositcodes/cancel'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34769</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"D4CHY***************"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"446.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"used"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T19:10:49.978+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"used_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T19:11:17.386+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='7fb271cddf'>Возвращение денег из своего кода на баланс.</h3>
<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/depositcodes/cancel</code></p>
<h3 id='6744ad4c7a-3'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id кода</td>
</tr>
</tbody></table>
<h2 id='3f93ba8579'>Детали кода</h2>
<blockquote>
<p>Детали кода:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">-H</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-H</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="s1">'https://stage.garantex.biz/api/v2/depositcodes/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34770</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OGNYA***************"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"used"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T19:19:37.599+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"used_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T19:21:18.120+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='52d604a77c'>Получение деталей кода</h3>
<p>Получение детальной информации по коду</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-4'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/depositcodes/{id}</code></p>
<h3 id='6744ad4c7a-4'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id кода</td>
</tr>
</tbody></table>
<h2 id='8e2b63875b'>История кодов</h2>
<blockquote>
<p>История кодов:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">-H</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-H</span> <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> <span class="s1">'https://stage.garantex.biz/api/v2/depositcodes'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34770</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OGNYA***************"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"used"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T19:19:37.599+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"used_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T19:21:18.120+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34769</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"D4CHY***************"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"446.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"used"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T19:10:49.978+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"used_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-22T19:11:17.386+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Получение списка своих кодов с возможностью фильтрации</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-5'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/depositcodes</code></p>
<h3 id='6744ad4c7a-5'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>нет</td>
<td>Код фиатной валюты. Например, <strong>rub</strong>, <strong>uah</strong>, <strong>usd</strong></td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество результатов в ответе, по умолчанию 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>С какой записи по номеру начинать</td>
</tr>
<tr>
<td><strong>used</strong></td>
<td>нет</td>
<td>Использован ли код</td>
</tr>
</tbody></table>
<h1 id='23dab7a7ad'>Выводы</h1><h2 id='f8eb11b7d7'>История выводов</h2>
<blockquote>
<p>Получить список выводов</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/withdraws"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">32690</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fiat"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"код пополнения: XQGW4***************"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-13T22:52:37+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-13T22:52:37+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-04-13T22:52:37+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="err">,</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">31449</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">тип</span><span class="w"> </span><span class="err">валюты:</span><span class="w"> </span><span class="err">coin</span><span class="w"> </span><span class="err">или</span><span class="w"> </span><span class="err">fiat</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01145726"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00005"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3AXFusZJufbaxcm8o2JoD2eHEvZDgL9Asu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeed"</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">статус</span><span class="w"> </span><span class="err">заявки</span><span class="w"> 
    </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"70c71a54b3554de88829ef3cc6323e90443f4615943d4352c081cd6f33c34f2a"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">620172</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">592</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T18:11:54+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T18:17:10+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-03-04T18:17:10+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список заявок на вывод с разбиением по страницам.
Заявки выводятся отсортированные от новых к старым.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/withdraws</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>нет</td>
<td>Код валюты, например <strong>aed</strong>,<strong>aff</strong>,<strong>btc</strong>,<strong>btc-bbtc</strong>,<strong>btc-bsc</strong>,<strong>dai</strong>,<strong>dai-bsc</strong>,<strong>eth</strong>,<strong>eth-bsc</strong>,<strong>rub</strong>,<strong>uah</strong>,<strong>usd</strong>,<strong>usdt</strong>,<strong>usdt-bsc</strong>,<strong>usdt-omni</strong>,<strong>usdt-tron</strong></td>
</tr>
<tr>
<td><strong>page</strong></td>
<td>нет</td>
<td>Номер страницы, по умолчанию 1 (deprecated)</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>нет</td>
<td>Статус. Может быть  <strong>prepared</strong>, <strong>submitted</strong>, <strong>rejected</strong>, <strong>accepted</strong>, <strong>suspected</strong>, <strong>processing</strong>, <strong>pending</strong>, <strong>queued</strong>, <strong>succeed</strong>, <strong>canceled</strong>, <strong>failed</strong>, <strong>toinspect</strong>, <strong>confirming</strong>, <strong>blocked</strong></td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество записей на странице, по умолчанию 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>С какой записи по номеру начинать</td>
</tr>
<tr>
<td><strong>start_time</strong></td>
<td>нет</td>
<td>С какой записи по времени создания начинать, по умолчанию - без ограничений</td>
</tr>
<tr>
<td><strong>end_time</strong></td>
<td>нет</td>
<td>По какую запись возвращать результат. По умолчанию - текущий таймстэмп</td>
</tr>
</tbody></table>
<h3 id='bd6108841b'>Возвращаемые значения</h3>
<p>Обратите внимание, поля в возвращаемом списке различаются для фиатных и крипто выводов!</p>

<p>Для крипты добавляются поля <strong>txid</strong>, <strong>block_number</strong> и <strong>confirmations</strong>.</p>

<p>Поле <strong>state</strong> может принимать следующие значения:</p>

<ul>
<li><strong>submitted</strong>: создан</li>
<li><strong>canceled</strong>: отменен</li>
<li><strong>accepted</strong>: принят к обработке</li>
<li><strong>suspected</strong>: отменён службой безопасности как подозретельный</li>
<li><strong>rejected</strong>: не удался</li>
<li><strong>processing</strong>: обрабатывается</li>
<li><strong>pending</strong>: обрабатывается</li>
<li><strong>queued</strong>: обрабатывается</li>
<li><strong>succeed</strong>: успешно завершён</li>
<li><strong>failed</strong>: не удался</li>
<li><strong>toinspect</strong>: на ручной проверке</li>
<li><strong>confirming</strong>: подтверждение в блокчейне</li>
<li><strong>blocked</strong>: заблокирован службой безопасности</li>
</ul>
<h2 id='890f5dfe08'>Информация о выводе</h2>
<blockquote>
<p>Получить детали вывода по withdraw id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="s2">"https://garantex.io/api/v2/withdraws/{withdraw_id}"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0042"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14sWK1hUw3p3efBSqdC9yNSkynARmgF9zA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234f116be697c6b014d15edd4aa648c399c71a3acec567a0f806751184500fc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">612345</span><span class="p">,</span><span class="w">
    </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">194</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-15T20:16:48+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-15T20:43:11+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-15T20:43:11+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Получение детальной информации о выводе по ID</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/withdraws/{withdraw_id}</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withdraw_id</strong></td>
<td>да</td>
<td>ID вывода полученное при его создании / из истории выводов</td>
</tr>
</tbody></table>
<h3 id='bd6108841b-2'>Возвращаемые значения</h3>
<p>Обратите внимание, поля в возвращаемом списке различаются для фиатных и крипто выводов!</p>

<p>Для крипты добавляются поля <strong>txid</strong>, <strong>block_number</strong> и <strong>confirmations</strong>.</p>
<h2 id='f0e3b97934'>Создание заявки на вывод</h2>
<blockquote>
<p>Создать заявку на вывод средств</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s2">"Authorization: Bearer {JWT}"</span> <span class="nt">-d</span> <span class="s2">"currency={currency}&amp;amount={amount}&amp;rid={rid}"</span> <span class="s2">"https://garantex.io/api/v2/withdraws/create"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа (вывод крипты):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">33104</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usdt"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101.17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xda36a74ca59f8816dc330fae1074223aa89833a1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"txid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"block_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-09T20:27:15+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-09T20:27:15+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Пример ответа (вывод фиата):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">33108</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fiat"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15150.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Сбербанк онлайн регионы: 1234 5678 9012 3456"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-09T21:12:13+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-09T21:12:13+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос для создания заявки на вывод крипты / фиата. Обратите внимание, набор параметров запроса для них различается!</p>

<ul>
<li>требуемый уровень доступа: <strong>withdraw</strong></li>
</ul>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/withdraws/create</code></p>
<h3 id='6744ad4c7a-3'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>да</td>
<td>Код валюты, например <strong>aed</strong>,<strong>aff</strong>,<strong>btc</strong>,<strong>btc-bbtc</strong>,<strong>btc-bsc</strong>,<strong>dai</strong>,<strong>dai-bsc</strong>,<strong>eth</strong>,<strong>eth-bsc</strong>,<strong>rub</strong>,<strong>uah</strong>,<strong>usd</strong>,<strong>usdt</strong>,<strong>usdt-bsc</strong>,<strong>usdt-omni</strong>,<strong>usdt-tron</strong></td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>да</td>
<td>Сумма к получению (без учёта комиссии!)</td>
</tr>
<tr>
<td><strong>rid</strong></td>
<td>да</td>
<td>Адрес вывода. Для фиата формат поля зависит от направления.</td>
</tr>
<tr>
<td><a href='#92dd9b64ca'>gateway_type_id</a></td>
<td>зависит от валюты</td>
<td>ID выбранного направления вывода, необходим для фиатных выводов.</td>
</tr>
<tr>
<td><strong>data</strong></td>
<td>нет</td>
<td>JSON поле с дополнительной информацией о выводе, необходимость и формат поля зависят от выбранного направления вывода.</td>
</tr>
</tbody></table>
<h3 id='bd6108841b-3'>Возвращаемые значения</h3>
<p>Информация о созданной заявке на вывод.</p>

<p>Обратите внимание, набор полей в возвращаемом значении различаются для фиатных и крипто выводов!
Для крипты добавляются поля <strong>txid</strong>, <strong>block_number</strong> и <strong>confirmations</strong>, выставленные в нулевые значения.</p>
<h1 id='p2p'>P2P</h1><h2 id='p2p-flow'>P2P flow</h2>
<p>Чтобы воспользоваться API P2P-секции биржи, необходимо следующее:</p>

<ol>
<li><p>Подключить 2-х факторную аутентификацию на сайте или в приложении</p></li>
<li><p>Завести P2P-никнейм на сайте или в приложении</p></li>
<li><p>Просматривать чужие P2P-объявления, отправлять по ним сделки</p></li>
<li><p>Создавать свои объявления, получать по ним сделки</p></li>
</ol>

<p>Пункты 3 и 4 описаны ниже.</p>
<h3 id='p2p-2'>Подраздел P2P-профили</h3>
<p>Позволяет просматривать профили других пользователей, их репутацию и статистику по ним.</p>
<h3 id='d66d239c5c'>Подраздел Чаты</h3>
<p>Чат открывается автоматически, когда создается сделка. Большую часть времени в чат пишет бот - об открытии/закрытии сделок. Еще туда пишет контрагент - с обсуждением условий сделки. API позволяет читать и писать в чаты.</p>
<h3 id='3f92fe50eb'>Подраздел Все объявления</h3>
<p>API позволяет читать объявления других людей, чтобы открывать сделки по понравившимся.</p>
<h3 id='p2p-3'>Подраздел P2P-сделки</h3>
<p>Сделка создается, например, когда вы, прочитав чужое объявление, решили на него откликнуться. Для создания сделки достаточно желаемой суммы (в пределах объявления) и ID понравившегося объявления. Свои сделки можно просматривать с фильтрацией, завершать, отменять, дополнять реквизитами, ставить оценку, жаловаться. Еще на сделку можно соглашаться, если она пришла по вашему объявлению.</p>
<h3 id='83c2b835ca'>Подраздел Свои объявления</h3>
<p>Свои объявления создаются здесь. Затем их можно просматривать с фильтрацией, изменять, включать, выключать, удалять, менять вид доступа и требования к контрагенту.</p>
<h2 id='p2p-4'>P2P-профили</h2><h3 id='250e8cd75f'>Просмотр профиля пользователя</h3>
<blockquote>
<p>Получить P2P-профиль по никнейму:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://garantex.io/api/v2/otc/profiles?nickname={nickname}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"registered_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-25"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"first_deal_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_deals"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_partners_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tg_username"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt; 100K"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_volume_30d"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt; 100K"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ads_sell"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"ads_buy"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает публичный P2P-профиль пользователя по его P2P-никнейму.</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/profiles</code></p>
<h3 id='6744ad4c7a'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>nickname</strong></td>
<td>да</td>
<td>P2P-никнейм, по которому нужно получить публичный профиль</td>
</tr>
</tbody></table>
<h2 id='3ba5efad4c'>Чаты</h2><h3 id='46568beeb0'>Получить список всех чатов</h3>
<blockquote>
<p>Получить список чатов авторизованного пользователя:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span>  <span class="s1">'https://garantex.io/api/v2/otc/chats?limit={limit}&amp;offset={offset}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19446</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1018</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unread_message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"counterparty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_chat_message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277969</span><span class="p">,</span><span class="w">
      </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19446</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3382</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"file_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://stage.garantex.biz/uploads/chat_message/file/277969/photo_2021-12-20_23-27-57.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:52:48+03:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-29T17:01:39+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:52:48+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unread_message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"counterparty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_chat_message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277967</span><span class="p">,</span><span class="w">
      </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:52:04+03:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-10-05T23:57:39+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:52:04+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения списка чатов для залогиненного юзера.</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-2'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/chats</code></p>
<h3 id='6744ad4c7a-2'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество чатов, по умолчанию - 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>Сколько первых чатов пропустить, по умолчанию - 0</td>
</tr>
</tbody></table>

<div></div>
<h3 id='6a16784330'>Получить сообщения чата</h3>
<blockquote>
<p>Получить сообщения выбранного чата:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://garantex.io/api/v2/otc/chats/{chat_id}/messages?limit={limit}&amp;offset={offset}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277966</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3378</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Сделка #41520 отменена"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41520</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:33:07+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277965</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3378</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Продавец открыл сделку #41520 на сумму 100.00 RUB, к оплате / получению - 105.00 RUB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deal_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41520</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"seller_pending"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:32:34+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос для получения списка сообщений по chat_id чата</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-3'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/chats/{chat_id}/messages</code></p>
<h3 id='6744ad4c7a-3'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>chat_id</strong></td>
<td>да</td>
<td>id выбранного чата</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество сообщений, по умолчанию - 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>Сколько первых сообщений пропустить, по умолчанию - 0</td>
</tr>
</tbody></table>

<div></div>
<h3 id='f6c74adfe0'>Послать сообщение</h3>
<blockquote>
<p>Послать сообщение в чат:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-F</span> <span class="nv">chat_id</span><span class="o">={</span>chat_id<span class="o">}</span> <span class="nt">-F</span>  <span class="nt">-F</span>  <span class="nt">-F</span> <span class="nv">message</span><span class="o">={</span>message<span class="o">}</span>  <span class="s1">'https://stage.garantex.biz/api/v2/otc/chats/message'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277977</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-23T19:47:42+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Послать сообщение в чат, выбранный по одному из id. В параметрах должен быть указан хотя бы один из id - чата (chat_id), объявления (ad_id) или сделки (deal_id), к которым относится чат. </p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-4'>HTTP Request</h4>
<p><code>POST https://stage.garantex.biz/api/v2/otc/chats/message</code></p>
<h3 id='6744ad4c7a-4'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>chat_id</strong></td>
<td>1/3</td>
<td>id чата, куда нужно отправить сообщение</td>
</tr>
<tr>
<td><strong>ad_id</strong></td>
<td>1/3</td>
<td>id объявления, в чат которого надо отправить сообщение</td>
</tr>
<tr>
<td><strong>deal_id</strong></td>
<td>1/3</td>
<td>id сделки, в чат которой надо отправить сообщение</td>
</tr>
<tr>
<td><strong>message</strong></td>
<td>да</td>
<td>Сколько первых сообщений пропустить, по умолчанию - 0</td>
</tr>
</tbody></table>

<div></div>
<h3 id='8188bc3dd3'>Пометить прочитанным</h3>
<blockquote>
<p>Пометить прочитанными сообщения чата:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/chats/{chat_id}/mark_read'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">98</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unread_message_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"counterparty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_chat_message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">277977</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ad_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-23T19:47:42+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-10-05T23:57:39+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-23T19:47:42+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Пометить прочитанными сообщения чата, выбранного по chat_id. </p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-5'>HTTP Request</h4>
<p><code>POST https://stage.garantex.biz/api/v2/otc/chats/{chat_id}/mark_read</code></p>
<h3 id='6744ad4c7a-5'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>chat_id</strong></td>
<td>да</td>
<td>id чата</td>
</tr>
</tbody></table>
<h2 id='e633323c70'>Все объявления</h2><h3 id='166b811675'>Список всех объявлений</h3>
<blockquote>
<p>Получить список всех объявлений:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://stage.garantex.biz/api/v2/otc/ads?direction={direction}&amp;only_available={only_available}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3388</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111111.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fffff"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fffff"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3377</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3000000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ууууу"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ууууу"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.03"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список всех объявлений с возможностью фильтрации</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-6'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/ads</code></p>
<h3 id='6744ad4c7a-6'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>direction</strong></td>
<td>да</td>
<td>Направление: <strong>sell</strong> or <strong>buy</strong></td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>нет</td>
<td>Фильтрация по сумме желаемой сделки</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>нет</td>
<td>Код фиатной валюты. Например, <strong>rub</strong>, <strong>uah</strong>, <strong>usd</strong></td>
</tr>
<tr>
<td><strong>nickname</strong></td>
<td>нет</td>
<td>Nickname второго участника сделки</td>
</tr>
<tr>
<td><strong>only_available</strong></td>
<td>нет</td>
<td>Показать только доступные сделки. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>true</strong></td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td>нет</td>
<td>Поиск по способу оплаты, включение подстроки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='b948b9bb36'>Детали объявления</h3>
<blockquote>
<p>Получить детали по id объявления:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s1">'https://stage.garantex.biz/api/v2/otc/ads/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3377</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
  </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3000000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ууууу"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ууууу"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.03"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает детали объявления по указанному id объявления</p>

<ul>
<li>требуемый уровень доступа: <strong>публичный</strong></li>
</ul>
<h4 id='http-request-7'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/ads/{id}</code></p>
<h3 id='6744ad4c7a-7'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>
<h2 id='p2p-c'>P2P-cделки</h2><h3 id='a66b19b34f'>Список своих сделок</h3>
<blockquote>
<p>Получить список своих сделок:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41520</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"105.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.05"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:32:34+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41519</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11.55"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.05"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"waiting"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:25:27+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список своих сделок с возможностью фильтрации</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-8'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/deals</code></p>
<h3 id='6744ad4c7a-8'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>нет</td>
<td>Код фиатной валюты. Например, <strong>rub</strong>, <strong>uah</strong>, <strong>usd</strong></td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>нет</td>
<td>Фильтрация по статусу сделки. <strong>pending</strong>, <strong>waiting</strong>, <strong>paid</strong>, <strong>arbitration</strong>, <strong>canceled</strong>, <strong>completed</strong>. Если статус не задан, выводятся все активные сделки</td>
</tr>
<tr>
<td><strong>counterparty</strong></td>
<td>нет</td>
<td>Nickname второго участника сделки</td>
</tr>
<tr>
<td><strong>direction</strong></td>
<td>нет</td>
<td>Направление сделки - <strong>sell</strong>, <strong>buy</strong>. По умолчанию выводятся все.</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>нет</td>
<td>Количество сделок, по умолчанию - 250</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>нет</td>
<td>Через сколько первых сделок начать выводить остальные сделки</td>
</tr>
<tr>
<td><strong>start_time</strong></td>
<td>нет</td>
<td>Время создания сделок, нижняя граница. Без ограничений (date-time)</td>
</tr>
<tr>
<td><strong>end_time</strong></td>
<td>нет</td>
<td>Время создания сделок, верхняя граница. Ограничение - текущий момент (date-time)</td>
</tr>
<tr>
<td><strong>order_by</strong></td>
<td>нет</td>
<td>Сортировка по id, <strong>asc</strong> или <strong>desc</strong>, по умолчанию <strong>desc</strong></td>
</tr>
</tbody></table>

<div></div>
<h3 id='726d9dd6e9'>Детали сделки</h3>
<blockquote>
<p>Получить детали по id сделки:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41514</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3379</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"900.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:06:08+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает детали сделки по указанному id сделки</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-9'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/deals/{id}</code></p>
<h3 id='6744ad4c7a-9'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='b5cdc63989'>Создание сделки</h3>
<blockquote>
<p>Создать новую P2P-сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'ad_id={ad_id}&amp;amount={amount}&amp;ad_version={ad_version}&amp;payment_info={payment_info}'</span>  <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41530</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"439.56"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:24:25+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос создает сделку и возвращает детали созданной сделки</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-10'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/otc/deals</code></p>
<h3 id='6744ad4c7a-10'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ad_id</strong></td>
<td>да</td>
<td>id объявления, по которому создается сделка</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>да</td>
<td>Сумма сделки в валюте объявления</td>
</tr>
<tr>
<td><strong>ad_version</strong></td>
<td>нет</td>
<td>id версии объявления, чтобы убедиться, что объявление не было слишком сильно изменено</td>
</tr>
<tr>
<td><strong>payment_info</strong></td>
<td>нет</td>
<td>Платежные реквизиты, применимо только к объявлениям о покупке</td>
</tr>
</tbody></table>

<div></div>
<h3 id='7467e0efe3'>Изменить рейтинг сделки</h3>
<blockquote>
<p>Изменить рейтинг сделки:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'rating={rating}'</span>  <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/rate'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41514</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3379</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"900.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:06:08+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Изменить рейтинг сделки с заданным id. Возвращаются детали сделки с измененным рейтингом</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-11'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/rate</code></p>
<h3 id='6744ad4c7a-11'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки, которой изменяется рейтинг</td>
</tr>
<tr>
<td><strong>rating</strong></td>
<td>да</td>
<td>выставляемая оценка</td>
</tr>
</tbody></table>

<div></div>
<h3 id='1d5a1fd11f'>Указание/изменение платежных реквизитов</h3>
<blockquote>
<p>Указать/изменить реквизиты:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'payment_details={payment_details}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/payment_details'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41524</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3217</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"202.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"waiting"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ffff"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-24T18:47:50+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Установить новые платежные реквизиты. Подходит только для случаев, когда вы - продавец, а сделка - в статусе <strong>waiting</strong> или <strong>pending</strong>. Запрос возвращает детали сделки с измененными реквизитами.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-12'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/payment_details</code></p>
<h3 id='6744ad4c7a-12'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки, которой изменяются платежные реквизиты</td>
</tr>
<tr>
<td><strong>payment_details</strong></td>
<td>да</td>
<td>текст платежных реквизитов</td>
</tr>
</tbody></table>

<div></div>
<h3 id='bea100a4c5'>Послать сделку на арбитраж</h3>
<blockquote>
<p>Послать сделку на арбитраж:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/arbitration'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41525</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"333.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"329.67"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arbitration"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T10:28:08+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Отправить сделку на арбитраж. Запрос возвращает детали сделки с измененным статусом.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-13'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/arbitration</code></p>
<h3 id='6744ad4c7a-13'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='d59d007de7'>Завершить сделку</h3>
<blockquote>
<p>Завершить сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/complete'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41515</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3379</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"499.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.56"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T14:45:43+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:07:16+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Завершить сделку. Запрос возвращает детали сделки с измененным статусом. Нельзя завершить сделку в статусе <strong>waiting</strong> или на арбитраже.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-14'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/complete</code></p>
<h3 id='6744ad4c7a-14'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='4c5e5fa77b'>Отменить сделку</h3>
<blockquote>
<p>Отменить сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/cancel'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41526</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"121.77"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T14:52:56+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Отменить сделку. Запрос возвращает детали сделки с измененным статусом.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-15'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/cancel</code></p>
<h3 id='6744ad4c7a-15'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='6440106972'>Оплатить сделку</h3>
<blockquote>
<p>Пометить оплаченной сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/set_paid'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41527</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3206</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuuuuu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"439.56"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T18:16:18+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Отметить сделку оплаченной. Запрос возвращает детали сделки с измененным статусом.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-16'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/set_paid</code></p>
<h3 id='6744ad4c7a-16'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>

<div></div>
<h3 id='99496e972d'>Принять сделку</h3>
<blockquote>
<p>Принять сделку:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/deals/{id}/accept'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">41529</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ad"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3378</span><span class="p">,</span><span class="w">
    </span><span class="nl">"member"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ggggggf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ggggggf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.45"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verified_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"130.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.45"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.09"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"buyer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"seller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peer_nickname"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hgvhv"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_seller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating_by_buyer"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"chat_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19447</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-25T19:59:24+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Отметить сделку принятой. Запрос возвращает детали сделки с измененным статусом.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-17'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/deals/{id}/accept</code></p>
<h3 id='6744ad4c7a-17'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id сделки</td>
</tr>
</tbody></table>
<h2 id='274d7bcb30'>Свои объявления</h2><h3 id='24399066ee'>Список своих объявлений</h3>
<blockquote>
<p>Получить список своих объявлений</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s2">"https://garantex.io/api/v2/otc/my/ads"</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3380</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rrrrrrrrrrrrr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rrrrrrrrrrrrrr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-20T00:19:55+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:39:24+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3379</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7200369.35"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7200369.35"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hhhhhhh"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-22T05:22:55+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:37:31+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает список всех объявлений авторизованного пользователя, с возможностью фильтрации</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-18'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/my/ads</code></p>
<h3 id='6744ad4c7a-18'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>direction</strong></td>
<td>нет</td>
<td>Направление: <strong>sell</strong> or <strong>buy</strong>. По умолчанию: все направления</td>
</tr>
<tr>
<td><strong>active</strong></td>
<td>нет</td>
<td>Активные объявления или неактивные, <strong>true</strong> или <strong>false</strong>. По умолчанию: все объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='b948b9bb36-2'>Детали объявления</h3>
<blockquote>
<p>Получить детали по id объявления:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3271</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7200369.35"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7200369.35"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"llllllllll"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"llllllllll"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:39:44+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-20T18:06:42+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает детали объявления по указанному id объявления</p>

<ul>
<li>требуемый уровень доступа: <strong>read-only</strong></li>
</ul>
<h4 id='http-request-19'>HTTP Request</h4>
<p><code>GET https://garantex.io/api/v2/otc/my/ads/{id}</code></p>
<h3 id='6744ad4c7a-19'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='30c79bc190'>Удалить объявление</h3>
<blockquote>
<p>Удалить объявление по id:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">no</span><span class="w"> </span><span class="err">content</span><span class="w">
</span></code></pre></div>
<p>Удаление объявления</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-20'>HTTP Request</h4>
<p><code>DELETE https://garantex.io/api/v2/otc/my/ads/{id}</code></p>
<h3 id='6744ad4c7a-20'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='a39d7de6a8'>Создать объявление</h3>
<blockquote>
<p>Создать объявление:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'currency={currency}&amp;min={min}&amp;max={max}&amp;price={price}&amp;direction={direction}&amp;description={description}&amp;payment_method={payment_method}&amp;active={active}&amp;private={private}&amp;auto_increase={auto_increase}&amp;only_verified={only_verified}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3389</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yadayada"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:35:03+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:35:03+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает созданное объявление.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-21'>HTTP Request</h4>
<p><code>POST https://garantex.io/api/v2/otc/my/ads</code></p>
<h3 id='6744ad4c7a-21'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td>да</td>
<td>Код фиатной валюты. Например, <strong>rub</strong>, <strong>uah</strong>, <strong>usd</strong></td>
</tr>
<tr>
<td><strong>min</strong></td>
<td>да</td>
<td>Минимальная сумма</td>
</tr>
<tr>
<td><strong>max</strong></td>
<td>да</td>
<td>Максимальная сумма</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td>да</td>
<td>Цена</td>
</tr>
<tr>
<td><strong>direction</strong></td>
<td>да</td>
<td>Направление: <strong>sell</strong> или <strong>buy</strong></td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>да</td>
<td>Описание</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td>да</td>
<td>Способ оплаты</td>
</tr>
<tr>
<td><strong>active</strong></td>
<td>нет</td>
<td>Активное ли объявление, <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>private</strong></td>
<td>нет</td>
<td>Приватное ли объявление, <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>auto_increase</strong></td>
<td>нет</td>
<td>Увеличивать ли максимум объявления до баланса авторизованного пользователя автоматически. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>only_verified</strong></td>
<td>нет</td>
<td>Объявление доступно только верифицированным пользователям. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>rating</strong></td>
<td>нет</td>
<td>Минимальный рейтинг контрагента. <strong>NULL</strong>, <strong>100</strong>, <strong>500</strong> и <strong>1000</strong>. По умолчанию - без ограничений</td>
</tr>
</tbody></table>

<div></div>
<h3 id='9348c6f5ea'>Редактировать объявление</h3>
<blockquote>
<p>Редактировать объявление:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'min={min}&amp;max={max}&amp;price={price}&amp;description={description}&amp;payment_method={payment_method}&amp;active={active}&amp;private={private}&amp;auto_increase={auto_increase}&amp;only_verified={only_verified}&amp;rating={rating}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3215</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3999.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"888888.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"888888.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some more text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T16:03:21+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-09T23:05:43+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос возвращает отредактированное объявление.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-22'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/my/ads/{id}</code></p>
<h3 id='6744ad4c7a-22'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
<tr>
<td><strong>min</strong></td>
<td>нет</td>
<td>Минимальная сумма</td>
</tr>
<tr>
<td><strong>max</strong></td>
<td>нет</td>
<td>Максимальная сумма</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td>нет</td>
<td>Цена</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>нет</td>
<td>Описание</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td>нет</td>
<td>Способ оплаты</td>
</tr>
<tr>
<td><strong>active</strong></td>
<td>нет</td>
<td>Активное ли объявление, <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>private</strong></td>
<td>нет</td>
<td>Приватное ли объявление, <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>auto_increase</strong></td>
<td>нет</td>
<td>Увеличивать ли максимум объявления до баланса авторизованного пользователя автоматически. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>only_verified</strong></td>
<td>нет</td>
<td>Объявление доступно только верифицированным пользователям. <strong>true</strong> или <strong>false</strong>, по умолчанию <strong>false</strong></td>
</tr>
<tr>
<td><strong>rating</strong></td>
<td>нет</td>
<td>Минимальный рейтинг контрагента. <strong>NULL</strong>, <strong>100</strong>, <strong>500</strong> и <strong>1000</strong>. По умолчанию - без ограничений</td>
</tr>
</tbody></table>

<div></div>
<h3 id='b34da29f93'>Переключить статус приватности</h3>
<blockquote>
<p>Переключить статус приватности:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}/toggle_private'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3215</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some more text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T18:11:50+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-09T23:05:43+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос переключает статус приватности объявления. Если объявление было приватным, оно становится публичным и наоборот.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-23'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/my/ads/{id}/toggle_private</code></p>
<h3 id='6744ad4c7a-23'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='20b2982a67'>Переключить активность объявления</h3>
<blockquote>
<p>Переключить активность объявления:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}/toggle_active'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3215</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some more text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T18:49:09+03:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-09T23:05:43+03:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Запрос переключает статус активности объявления. Если объявление было активным, оно становится неактивным, и наоборот. Неактивное объявление выключается из общего списка объявлений в P2P.</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-24'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/my/ads/{id}/toggle_active</code></p>
<h3 id='6744ad4c7a-24'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>да</td>
<td>id объявления</td>
</tr>
</tbody></table>

<div></div>
<h3 id='0c16fcd6ac'>Отключить все объявления</h3>
<blockquote>
<p>Отключить все объявления:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {JWT}'</span> <span class="nt">-d</span> <span class="s1">'direction={direction}'</span> <span class="s1">'https://stage.garantex.biz/api/v2/otc/my/ads/{id}/deactivate_all'</span>
</code></pre></div>
<blockquote>
<p>Пример ответа:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3380</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rrrrrrrrrrrrr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rrrrrrrrrrrrrr"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:05:57+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:39:24+03:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3378</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"719637.15"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"real_max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"719637.15"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.45"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ggggggf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ggggggf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fiat_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_increase"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"only_verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28T19:05:57+03:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-12-13T00:36:45+03:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Отключить все объявления (статус активности active выставить в false). Можно также отключить только объявления по покупке или только по продаже. Запрос возвращает список деактивированных объявлений</p>

<ul>
<li>требуемый уровень доступа: <strong>otc</strong></li>
</ul>
<h4 id='http-request-25'>HTTP Request</h4>
<p><code>PUT https://garantex.io/api/v2/otc/my/ads/{id}/deactivate_all</code></p>
<h3 id='6744ad4c7a-25'>Параметры</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Обязательный</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>direction</strong></td>
<td>нет</td>
<td>направление сделок: <strong>sell</strong> или <strong>buy</strong></td>
</tr>
</tbody></table>
<h1 id='allbacks'>Сallbacks</h1>
<p>Garantex поддерживает 3 вида обратных вызовов:</p>

<ul>
<li><p>по изменению состояния депозита</p></li>
<li><p>по изменению состояния вывода</p></li>
<li><p>по изменению состояния ордера / по исполнению сделки</p></li>
</ul>

<p>Ссылки для обратных вызовов прописываются в форме API Callback в настройках профиля: <a href='https://garantex.io/settings'>https://garantex.io/settings</a></p>

<p>Формат отправки запросов: POST x-www-form-urlencoded </p>

<p>Общие параметры, передаваемые в запросе: </p>

<table><thead>
<tr>
<th>Параметр</th>
<th>Значение</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td><strong>event_type</strong></td>
<td>String<ul><li>deposit</li><li>withdraw</li><li>order</li><li>trade</li></ul></td>
<td>тип объекта<ul><li>депозит</li><li>вывод</li><li>заявка</li><li>сделка</li></ul></td>
</tr>
<tr>
<td><strong>id</strong></td>
<td>Integer</td>
<td>id объекта</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>String</td>
<td>тип события / состояние объекта</td>
</tr>
</tbody></table>

<p>все остальные поля для каждого типа объекта свои, и совпадают с тем что возвращается в обычных API запросах для этого объекта.  </p>

<p>Типы событий различаются для разных объектов.</p>

<p>Возможные типы:</p>

<ul>
<li>сделки 

<ul>
<li><strong>created</strong>: сделка проведена</li>
</ul></li>
<li>заявки

<ul>
<li><strong>done</strong>: исполнена</li>
<li><strong>cancel</strong>: отменена</li>
</ul></li>
<li>депозиты

<ul>
<li><strong>submitted</strong>: создан</li>
<li><strong>accepted</strong>: зачислен</li>
<li><strong>rejected</strong>: отменён</li>
<li><strong>suspected</strong>: заблокирован службой безопасности</li>
</ul></li>
<li>выводы

<ul>
<li><strong>processing</strong>: отправляется</li>
<li><strong>succeed</strong>: завершён</li>
<li><strong>confirming</strong>: подтверждается в блокчейне</li>
<li><strong>failed</strong>: не удался</li>
<li><strong>rejected</strong>: отменён</li>
<li><strong>suspected</strong>: отменён службой безопасности</li>
</ul></li>
</ul>

<p>Имейте ввиду, что для фиатных и крипто валют последовательность статусов вывода будет разной, а для разных типов выводов часть промежуточных статусов может быть пропущена. </p>
<h1 id='681b5ae3d2'>Ошибки</h1>
<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>2000</td>
<td>Invalid API-key, IP, or permissions for action.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - JWT токен неверен</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests - вы превысили допустимую частоту запросов.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error - внутренняя ошибка сервера.</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway - внутренняя ошибка сервера, попробуйте повторить запрос позже.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable - внутренняя ошибка сервера, попробуйте повторить запрос позже.</td>
</tr>
</tbody></table>
<h1 id='bad9669b03'>Инструкции</h1>
<ul>
<li><a href='/files/premium_exchanger.pdf'>Настройка и подключение модуля Premium Exchanger</a></li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="php">PHP</a>
                <a href="#" data-language-name="javascript">NodeJS</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="csharp">C#</a>
          </div>
      </div>
    </div>
  </body>
</html>
